<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriSmart Adviser - Smart Farm Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            --primary-green: #2e7d32;
            --light-green: #4caf50;
            --dark-green: #1b5e20;
            --primary-yellow: #ffeb3b;
            --light-yellow: #fff9c4;
            --dark-yellow: #fbc02d;
            --primary-blue: #2196f3;
            --light-blue: #e3f2fd;
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --dark-gray: #424242;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --gradient: linear-gradient(135deg, var(--primary-green), var(--light-green));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4efe9 100%);
            color: var(--dark-gray);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: var(--gradient);
            color: var(--white);
            padding: 15px 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logo-img {
            width: 40px;
            height: 40px;
            background: var(--primary-yellow);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-img i {
            color: var(--primary-green);
            font-size: 1.2rem;
        }

        .top-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .user-info {
            font-weight: 500;
        }

        .language-selector {
            position: relative;
        }

        .language-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: var(--white);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
        }

        .language-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--white);
            border-radius: 10px;
            box-shadow: var(--shadow);
            width: 250px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .language-search {
            padding: 10px;
            border-bottom: 1px solid var(--medium-gray);
        }

        .language-search input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--medium-gray);
            border-radius: 5px;
        }

        .language-list {
            list-style: none;
            padding: 10px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .language-list li {
            padding: 8px 15px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--dark-gray);
        }

        .language-list li:hover {
            background: var(--light-gray);
            color: var(--primary-green);
        }

        /* Navigation Styles */
        nav {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 70px;
            z-index: 99;
        }

        .nav-tabs {
            display: flex;
            list-style: none;
            overflow-x: auto;
            white-space: nowrap;
        }

        .nav-tabs li {
            flex: 1;
            min-width: 150px;
        }

        .nav-tabs a {
            display: block;
            padding: 15px 20px;
            text-align: center;
            text-decoration: none;
            color: var(--dark-gray);
            font-weight: 500;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }

        .nav-tabs a:hover, .nav-tabs a.active {
            color: var(--primary-green);
            border-bottom: 3px solid var(--primary-green);
            background-color: var(--light-gray);
        }

        .nav-tabs i {
            margin-right: 8px;
        }

        /* Main Content Styles */
        main {
            padding: 30px 0;
        }

        .section-title {
            font-size: 1.8rem;
            color: var(--dark-green);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-green);
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 20px;
            transition: var(--transition);
            border-left: 5px solid var(--primary-green);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-gray);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-green);
        }

        .card-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .feature-card {
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 20px;
            transition: var(--transition);
            cursor: pointer;
            text-align: center;
            border-top: 4px solid var(--primary-green);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: var(--gradient);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin: 0 auto 15px;
        }

        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-green);
        }

        .feature-desc {
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Camera Section Styles */
        .camera-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .camera-container {
            width: 100%;
            max-width: 600px;
            height: 400px;
            background: var(--dark-gray);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: var(--shadow);
        }

        #camera-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-green);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--dark-green);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--primary-yellow);
            color: var(--dark-gray);
        }

        .btn-secondary:hover {
            background: var(--dark-yellow);
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-green);
            color: var(--primary-green);
        }

        .btn-outline:hover {
            background: var(--primary-green);
            color: var(--white);
            transform: translateY(-2px);
        }

        /* Results Section */
        .results-section {
            margin-top: 30px;
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .remedy-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .remedy-card {
            background: var(--white);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: var(--transition);
            border: 1px solid var(--medium-gray);
            cursor: pointer;
        }

        .remedy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .remedy-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-green);
        }

        .remedy-desc {
            color: var(--dark-gray);
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        /* Chart Styles */
        .chart-container {
            width: 100%;
            height: 300px;
            margin: 20px 0;
        }

        /* IoT Section */
        .iot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .sensor-card {
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 20px;
            text-align: center;
            transition: var(--transition);
        }

        .sensor-card:hover {
            transform: translateY(-5px);
        }

        .sensor-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .sensor-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-gray);
        }

        .sensor-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-green);
            margin: 10px 0;
        }

        .sensor-unit {
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        /* Map Styles */
        .map-container {
            width: 100%;
            height: 400px;
            background: var(--light-gray);
            border-radius: 15px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 15px;
        }

        .map-placeholder {
            text-align: center;
            color: var(--dark-gray);
        }

        .map-placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary-green);
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chatbot-btn {
            width: 60px;
            height: 60px;
            background: var(--primary-green);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
        }

        .chatbot-btn:hover {
            background: var(--dark-green);
            transform: scale(1.1);
        }

        .chatbot-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 450px;
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .chatbot-header {
            background: var(--gradient);
            color: var(--white);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .chatbot-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            padding: 10px 15px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .user-message {
            background: var(--primary-green);
            color: var(--white);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            background: var(--light-gray);
            color: var(--dark-gray);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .chatbot-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid var(--medium-gray);
            gap: 10px;
        }

        .chatbot-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid var(--medium-gray);
            border-radius: 20px;
            outline: none;
        }

        .chatbot-input button {
            background: var(--primary-green);
            color: var(--white);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-recording {
            animation: pulse 1.5s infinite;
            background: var(--dark-green) !important;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-gray);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
        }

        /* Alert Styles */
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .alert-warning {
            background: #fff8e1;
            color: #ff8f00;
            border-left: 4px solid #ffc107;
        }

        .alert-info {
            background: #e3f2fd;
            color: #1565c0;
            border-left: 4px solid #2196f3;
        }

        /* Footer Styles */
        footer {
            background: var(--dark-green);
            color: var(--white);
            padding: 40px 0 20px;
            margin-top: 50px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }

        .footer-section {
            flex: 1;
            min-width: 250px;
        }

        .footer-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-yellow);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: var(--white);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--primary-yellow);
        }

        .copyright {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: var(--white);
            margin: 5% auto;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            background: var(--gradient);
            color: var(--white);
            padding: 20px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
        }

        .close {
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-body {
            padding: 20px;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--medium-gray);
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }

        .auth-tab.active {
            color: var(--primary-green);
            border-bottom: 3px solid var(--primary-green);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .social-login {
            margin-top: 20px;
            text-align: center;
        }

        .social-login p {
            margin-bottom: 15px;
            color: var(--dark-gray);
        }

        .social-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-social {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--medium-gray);
            background: var(--white);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-social.google:hover {
            background: #f5f5f5;
            border-color: #db4437;
        }

        .btn-social.facebook:hover {
            background: #f5f5f5;
            border-color: #4267b2;
        }

        /* Remedy Categories */
        .remedy-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .remedy-categories .btn {
            padding: 8px 16px;
        }

        .remedy-categories .btn.active {
            background: var(--primary-green);
            color: var(--white);
        }

        /* Search Results */
        .search-results {
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            display: none;
        }

        .search-result-item {
            padding: 12px 15px;
            border-bottom: 1px solid var(--light-gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .search-result-item:hover {
            background: var(--light-gray);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress {
            height: 100%;
            background: var(--gradient);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Settings Styles */
        .settings-section {
            margin-top: 30px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .setting-card {
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 20px;
            transition: var(--transition);
        }

        .setting-card:hover {
            transform: translateY(-5px);
        }

        .setting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .setting-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-green);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary-green);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Add Remedy Section */
        .add-remedy-section {
            margin-top: 30px;
            display: none;
        }

        .remedy-type-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .remedy-type-btn {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            text-align: center;
            border: 2px solid var(--primary-green);
            border-radius: 10px;
            background: var(--white);
            cursor: pointer;
            transition: var(--transition);
        }

        .remedy-type-btn:hover, .remedy-type-btn.active {
            background: var(--primary-green);
            color: var(--white);
        }

        .remedy-form {
            display: none;
        }

        .remedy-form.active {
            display: block;
        }

        .file-upload {
            border: 2px dashed var(--medium-gray);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .file-upload:hover {
            border-color: var(--primary-green);
            background: var(--light-gray);
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .nav-tabs {
                overflow-x: auto;
            }

            .dashboard {
                grid-template-columns: 1fr;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .chatbot-window {
                width: 300px;
                right: -20px;
            }

            .camera-controls {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .social-buttons {
                flex-direction: column;
            }

            .remedy-type-buttons {
                flex-direction: column;
            }
        }

        /* Loading Indicator */
        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--white);
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            z-index: 10000;
        }

        /* Disease Details Modal */
        .disease-details-modal {
            max-width: 800px;
        }

        .disease-image {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .remedy-video {
            width: 100%;
            max-height: 300px;
            border-radius: 10px;
            margin: 10px 0;
        }

        /* Notification Styles */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            max-width: 400px;
        }

        .notification {
            background: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideInRight 0.3s ease;
            border-left: 4px solid var(--primary-green);
        }

        .notification.error {
            border-left-color: #f44336;
        }

        .notification.warning {
            border-left-color: #ff9800;
        }

        .notification.info {
            border-left-color: #2196f3;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Smart Analytics Styles */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .analytics-card {
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 20px;
            transition: var(--transition);
        }

        .analytics-card:hover {
            transform: translateY(-5px);
        }

        /* Soil Analysis Results */
        .soil-analysis-results {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-top: 20px;
            display: none;
        }

        .soil-parameter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .soil-parameter:last-child {
            border-bottom: none;
        }

        .parameter-name {
            font-weight: 500;
            color: var(--dark-gray);
        }

        .parameter-value {
            font-weight: 600;
            color: var(--primary-green);
        }

        .parameter-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-optimal {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-warning {
            background: #fff8e1;
            color: #ff8f00;
        }

        .status-critical {
            background: #ffebee;
            color: #f44336;
        }
    </style>
</head>
<body>
    <!-- Loading Indicator -->
    <div class="loading" id="loading">
        <div style="text-align: center;">
            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: var(--primary-green); margin-bottom: 10px;"></i>
            <div>Processing...</div>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notification-container"></div>

    <!-- Header Section -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-img">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <span>AgriSmart Adviser</span>
                </div>
                <div class="top-controls">
                    <div class="user-info" id="user-info" style="display: none;">
                        <span id="user-name">Welcome, User</span>
                        <button class="btn btn-outline" id="logout-btn" style="margin-left: 10px;">
                            <i class="fas fa-sign-out-alt"></i> <span data-translate="logout">Logout</span>
                        </button>
                    </div>
                    <div class="language-selector">
                        <button class="language-btn" id="language-btn">
                            <i class="fas fa-globe"></i>
                            <span id="current-language-name">English</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="language-dropdown" id="language-dropdown">
                            <div class="language-search">
                                <input type="text" id="language-search" placeholder="Search language...">
                            </div>
                            <ul class="language-list" id="language-list">
                                <!-- Languages populated by JavaScript -->
                            </ul>
                        </div>
                    </div>
                    <button class="btn btn-outline" id="signin-btn">
                        <i class="fas fa-user"></i> <span data-translate="sign_in">Sign In</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav>
        <div class="container">
            <ul class="nav-tabs">
                <li><a href="#crop-health" class="active"><i class="fas fa-leaf"></i> <span data-translate="crop_health">Crop Health</span></a></li>
                <li><a href="#market-profit"><i class="fas fa-chart-line"></i> <span data-translate="market_profit">Market & Profit</span></a></li>
                <li><a href="#ai-iot"><i class="fas fa-microchip"></i> <span data-translate="ai_iot">AI & IoT</span></a></li>
                <li><a href="#database"><i class="fas fa-database"></i> <span data-translate="database">Database</span></a></li>
                <li><a href="#reports"><i class="fas fa-chart-bar"></i> <span data-translate="reports_analytics">Reports & Analytics</span></a></li>
                <li><a href="#settings"><i class="fas fa-cog"></i> <span data-translate="settings">Settings</span></a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Crop Health Tab -->
        <section id="crop-health" class="tab-content active">
            <h2 class="section-title" data-translate="crop_health_detection">Crop Health Detection</h2>
            <p data-translate="crop_health_desc">Upload or take a photo of your crop to detect diseases and get treatment recommendations.</p>
            
            <div class="camera-section">
                <div class="camera-container">
                    <video id="camera-preview" autoplay></video>
                    <canvas id="photo-canvas" style="display: none;"></canvas>
                    <img id="uploaded-image" style="display: none; width: 100%; height: 100%; object-fit: contain;">
                </div>
                <div class="camera-controls">
                    <button class="btn btn-primary" id="start-camera">
                        <i class="fas fa-camera"></i> <span data-translate="start_camera">Start Camera</span>
                    </button>
                    <button class="btn btn-secondary" id="capture-photo" disabled>
                        <i class="fas fa-camera-retro"></i> <span data-translate="capture_photo">Capture Photo</span>
                    </button>
                    <button class="btn btn-outline" id="upload-photo">
                        <i class="fas fa-upload"></i> <span data-translate="upload_photo">Upload Photo</span>
                    </button>
                    <button class="btn btn-primary" id="analyze-photo" style="display: none;">
                        <i class="fas fa-search"></i> <span data-translate="analyze_photo">Analyze Photo</span>
                    </button>
                    <input type="file" id="file-input" accept="image/*" style="display: none;">
                </div>
            </div>

            <div class="results-section" id="results-section" style="display: none;">
                <h3 data-translate="detection_results">Detection Results: <span id="disease-name">Leaf Rust</span></h3>
                <p data-translate="confidence">Confidence: <span id="confidence-level">92%</span></p>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <div data-translate="location_based_recommendation">Based on your location and crop conditions, we recommend the following treatments.</div>
                </div>
                
                <h4 data-translate="natural_remedies">Natural Remedies</h4>
                <div class="remedy-options" id="natural-remedies">
                    <!-- Natural remedies populated by JavaScript -->
                </div>
                
                <h4 data-translate="bio_pesticides">Bio Pesticides</h4>
                <div class="remedy-options" id="bio-pesticides">
                    <!-- Bio pesticides populated by JavaScript -->
                </div>
                
                <h4 data-translate="bio_fertilizers">Bio Fertilizers</h4>
                <div class="remedy-options" id="bio-fertilizers">
                    <!-- Bio fertilizers populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Market & Profit Tab -->
        <section id="market-profit" class="tab-content">
            <h2 class="section-title" data-translate="market_profit_tools">Market & Profit Tools</h2>
            
            <div class="dashboard">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-translate="market_price_prediction">Market Price Prediction</div>
                        <div class="card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                    <p data-translate="market_price_desc">Get real-time market prices for your crops based on location and demand.</p>
                    <div class="form-group">
                        <select class="form-control" id="crop-price-select">
                            <option value="">Select Crop</option>
                            <option value="wheat">Wheat</option>
                            <option value="rice">Rice</option>
                            <option value="corn">Corn</option>
                            <option value="soybean">Soybean</option>
                            <option value="cotton">Cotton</option>
                            <option value="sugarcane">Sugarcane</option>
                            <option value="potato">Potato</option>
                            <option value="tomato">Tomato</option>
                            <option value="onion">Onion</option>
                            <option value="chilli">Chilli</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" id="get-price-btn" data-translate="get_price_prediction">Get Price Prediction</button>
                    <div class="alert alert-success" style="margin-top: 15px; display: none;" id="price-result">
                        <i class="fas fa-check-circle"></i>
                        <div id="price-result-text"></div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-translate="crop_planning_advisor">Crop Planning Advisor</div>
                        <div class="card-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                    </div>
                    <p data-translate="crop_planning_desc">Get AI-powered suggestions for the best next crop based on your soil and previous crops.</p>
                    
                    <div class="form-group">
                        <label data-translate="last_crop_1">Last Crop 1</label>
                        <select class="form-control" id="last-crop-1">
                            <option value="">Select Crop</option>
                            <option value="wheat">Wheat</option>
                            <option value="rice">Rice</option>
                            <option value="corn">Corn</option>
                            <option value="soybean">Soybean</option>
                            <option value="cotton">Cotton</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label data-translate="last_crop_2">Last Crop 2</label>
                        <select class="form-control" id="last-crop-2">
                            <option value="">Select Crop</option>
                            <option value="wheat">Wheat</option>
                            <option value="rice">Rice</option>
                            <option value="corn">Corn</option>
                            <option value="soybean">Soybean</option>
                            <option value="cotton">Cotton</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label data-translate="soil_ph">Soil pH</label>
                        <input type="number" class="form-control" id="soil-ph" placeholder="Enter soil pH" data-translate-placeholder="enter_soil_ph" step="0.1" min="0" max="14" value="6.5">
                    </div>
                    
                    <div class="form-group">
                        <label data-translate="water_availability">Water Availability</label>
                        <select class="form-control" id="water-availability">
                            <option value="low" data-translate="low">Low</option>
                            <option value="medium" data-translate="medium">Medium</option>
                            <option value="high" data-translate="high" selected>High</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label data-translate="location">Location</label>
                        <input type="text" class="form-control" id="crop-location" placeholder="State, District, Country" data-translate-placeholder="state_district_country" value="Punjab, India">
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%;" id="get-crop-recommendation" data-translate="get_crop_recommendation">Get Crop Recommendation</button>
                    
                    <div class="alert alert-info" style="margin-top: 15px; display: none;" id="crop-recommendation">
                        <i class="fas fa-lightbulb"></i>
                        <div id="crop-recommendation-text"></div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-translate="profit_maximizer">Profit Maximizer</div>
                        <div class="card-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                    </div>
                    <p data-translate="profit_maximizer_desc">Optimize your farming strategy to maximize profits with AI recommendations.</p>
                    <div class="chart-container">
                        <canvas id="profit-chart"></canvas>
                    </div>
                    <div class="alert alert-success" style="margin-top: 15px;">
                        <i class="fas fa-chart-line"></i>
                        <div id="profit-increase-text" data-translate="profit_increase">By following our recommendations, your profit can increase by <strong id="profit-increase-value">23%</strong> this season.</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title" data-translate="simulation_mode">Simulation Mode</div>
                    <div class="card-icon">
                        <i class="fas fa-play-circle"></i>
                    </div>
                </div>
                <p data-translate="simulation_desc">Simulate crop growth and profit based on different conditions.</p>
                
                <div class="form-group">
                    <label data-translate="crop_name">Crop Name</label>
                    <select class="form-control" id="simulation-crop">
                        <option value="">Select Crop</option>
                        <option value="wheat">Wheat</option>
                        <option value="rice">Rice</option>
                        <option value="corn">Corn</option>
                        <option value="soybean">Soybean</option>
                        <option value="cotton">Cotton</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label data-translate="location">Location</label>
                    <input type="text" class="form-control" id="simulation-location" placeholder="Enter your location" data-translate-placeholder="enter_your_location" value="Punjab, India">
                </div>
                
                <button class="btn btn-primary" id="run-simulation" data-translate="run_simulation">Run Simulation</button>
                
                <div class="alert alert-info" style="margin-top: 15px; display: none;" id="simulation-result">
                    <i class="fas fa-chart-bar"></i>
                    <div id="simulation-result-text"></div>
                </div>
            </div>
        </section>

        <!-- AI & IoT Tab -->
        <section id="ai-iot" class="tab-content">
            <h2 class="section-title" data-translate="ai_iot_integration">AI & IoT Integration</h2>
            <p data-translate="ai_iot_desc">Monitor your farm in real-time with IoT sensors and AI analytics.</p>
            
            <div class="iot-grid">
                <div class="sensor-card">
                    <div class="sensor-icon">
                        <i class="fas fa-tint" style="color: #2196F3;"></i>
                    </div>
                    <div class="sensor-title" data-translate="soil_moisture">Soil Moisture</div>
                    <div class="sensor-value" id="soil-moisture-value">65%</div>
                    <div class="sensor-unit" id="soil-moisture-status" data-translate="optimal">Optimal</div>
                    <div class="progress-bar">
                        <div class="progress" id="soil-moisture-progress" style="width: 65%;"></div>
                    </div>
                </div>
                
                <div class="sensor-card">
                    <div class="sensor-icon">
                        <i class="fas fa-thermometer-half" style="color: #FF5722;"></i>
                    </div>
                    <div class="sensor-title" data-translate="temperature">Temperature</div>
                    <div class="sensor-value" id="temperature-value">28°C</div>
                    <div class="sensor-unit" id="temperature-status" data-translate="normal">Normal</div>
                    <div class="progress-bar">
                        <div class="progress" id="temperature-progress" style="width: 70%;"></div>
                    </div>
                </div>
                
                <div class="sensor-card">
                    <div class="sensor-icon">
                        <i class="fas fa-cloud" style="color: #03A9F4;"></i>
                    </div>
                    <div class="sensor-title" data-translate="humidity">Humidity</div>
                    <div class="sensor-value" id="humidity-value">72%</div>
                    <div class="sensor-unit" id="humidity-status" data-translate="high">High</div>
                    <div class="progress-bar">
                        <div class="progress" id="humidity-progress" style="width: 72%;"></div>
                    </div>
                </div>
                
                <div class="sensor-card">
                    <div class="sensor-icon">
                        <i class="fas fa-flask" style="color: #8BC34A;"></i>
                    </div>
                    <div class="sensor-title" data-translate="soil_ph">Soil pH</div>
                    <div class="sensor-value" id="soil-ph-value">6.8</div>
                    <div class="sensor-unit" id="soil-ph-status" data-translate="neutral">Neutral</div>
                    <div class="progress-bar">
                        <div class="progress" id="soil-ph-progress" style="width: 68%;"></div>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <canvas id="sensor-chart"></canvas>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <div class="card-title" data-translate="smart_irrigation_advice">Smart Irrigation Advice</div>
                    <div class="card-icon">
                        <i class="fas fa-water"></i>
                    </div>
                </div>
                <p id="irrigation-advice-text" data-translate="irrigation_advice_default">Based on current soil moisture and weather forecast, we recommend:</p>
                <ul style="margin: 15px 0; padding-left: 20px;" id="irrigation-list">
                    <li data-translate="irrigation_advice_1">Water crops tomorrow at 6:00 AM</li>
                    <li data-translate="irrigation_advice_2">Use 2.5 liters per square meter</li>
                    <li data-translate="irrigation_advice_3">Focus irrigation on the northern section</li>
                </ul>
                <div class="form-group">
                    <label data-translate="set_irrigation_schedule">Set Irrigation Schedule</label>
                    <input type="datetime-local" class="form-control" id="irrigation-schedule">
                </div>
                <button class="btn btn-primary" id="save-irrigation-schedule" data-translate="save_schedule">Save Schedule</button>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <div class="card-title" data-translate="live_soil_camera">Live Soil Camera</div>
                    <div class="card-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                </div>
                <p data-translate="live_camera_desc">Monitor your soil conditions with our live camera feed.</p>
                <div class="camera-container" style="height: 300px; margin-top: 15px;">
                    <div id="soil-camera-feed" style="display: flex; align-items: center; justify-content: center; height: 100%; background: var(--dark-gray); color: white; border-radius: 15px;">
                        <div style="text-align: center;">
                            <i class="fas fa-camera" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <div data-translate="live_soil_camera_feed">Live Soil Camera Feed</div>
                            <div style="font-size: 0.9rem; margin-top: 10px;" data-translate="connect_camera_desc">Connect your IoT camera to view live soil conditions</div>
                            <button class="btn btn-primary" style="margin-top: 15px;" id="connect-camera" data-translate="connect_camera">Connect Camera</button>
                        </div>
                    </div>
                </div>
                <div class="soil-analysis-results" id="soil-analysis-results">
                    <h3>Soil Analysis Results</h3>
                    <div class="soil-parameter">
                        <div class="parameter-name">Soil Moisture</div>
                        <div class="parameter-value">65%</div>
                        <div class="parameter-status status-optimal">Optimal</div>
                    </div>
                    <div class="soil-parameter">
                        <div class="parameter-name">Soil pH</div>
                        <div class="parameter-value">6.8</div>
                        <div class="parameter-status status-optimal">Neutral</div>
                    </div>
                    <div class="soil-parameter">
                        <div class="parameter-name">Nutrient Level</div>
                        <div class="parameter-value">Medium</div>
                        <div class="parameter-status status-warning">Needs Improvement</div>
                    </div>
                    <div class="soil-parameter">
                        <div class="parameter-name">Organic Matter</div>
                        <div class="parameter-value">3.2%</div>
                        <div class="parameter-status status-optimal">Good</div>
                    </div>
                    <div class="alert alert-info" style="margin-top: 15px;">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Recommendations:</strong> Add organic compost to improve nutrient levels. Current pH is optimal for most crops.
                    </div>
                </div>
            </div>
        </section>

        <!-- Database Tab -->
        <section id="database" class="tab-content">
            <h2 class="section-title" data-translate="knowledge_database">Knowledge Database</h2>
            <p data-translate="knowledge_database_desc">Access our comprehensive database of crop diseases, natural remedies, and farming techniques.</p>
            
            <div class="feature-grid">
                <div class="feature-card" id="natural-solutions-db">
                    <div class="feature-icon">
                        <i class="fas fa-book-medical"></i>
                    </div>
                    <div class="feature-title" data-translate="natural_solution_database">Natural Solution Database</div>
                    <div class="feature-desc" data-translate="natural_solution_desc">Browse verified natural remedies for common crop diseases and pests.</div>
                </div>
                
                <div class="feature-card" id="crop-disease-library">
                    <div class="feature-icon">
                        <i class="fas fa-bug"></i>
                    </div>
                    <div class="feature-title" data-translate="crop_disease_library">Crop Disease Library</div>
                    <div class="feature-desc" data-translate="crop_disease_desc">Searchable offline database of crop diseases with images and solutions.</div>
                </div>
                
                <div class="feature-card" id="smart-analytics-db">
                    <div class="feature-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div class="feature-title" data-translate="smart_analytics">Smart Analytics</div>
                    <div class="feature-desc" data-translate="smart_analytics_desc">Track growth rates, disease trends, expenses, and profit analytics.</div>
                </div>
                
                <div class="feature-card" id="add-remedy-feature" style="display: none;">
                    <div class="feature-icon">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <div class="feature-title" data-translate="add_remedy">Add Remedy</div>
                    <div class="feature-desc" data-translate="add_remedy_desc">Add new remedies, bio pesticides, or fertilizers to the database.</div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px; display: none;" id="natural-solutions-content">
                <div class="card-header">
                    <div class="card-title" data-translate="natural_solution_database">Natural Solution Database</div>
                    <div class="card-icon">
                        <i class="fas fa-book-medical"></i>
                    </div>
                </div>
                <p data-translate="natural_solution_search_desc">Browse all natural solutions, bio pesticides, and bio fertilizers.</p>
                
                <div class="remedy-categories">
                    <button class="btn btn-outline active" data-category="all" data-translate="all">All</button>
                    <button class="btn btn-outline" data-category="remedy" data-translate="natural_remedies">Natural Remedies</button>
                    <button class="btn btn-outline" data-category="bioPesticide" data-translate="bio_pesticides">Bio Pesticides</button>
                    <button class="btn btn-outline" data-category="bioFertilizer" data-translate="bio_fertilizers">Bio Fertilizers</button>
                </div>
                
                <div class="remedy-options" id="all-natural-solutions">
                    <!-- All natural solutions populated by JavaScript -->
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px; display: none;" id="crop-disease-content">
                <div class="card-header">
                    <div class="card-title" data-translate="crop_disease_library">Crop Disease Library</div>
                    <div class="card-icon">
                        <i class="fas fa-book"></i>
                    </div>
                </div>
                <p data-translate="crop_disease_search_desc">Browse our comprehensive database of crop diseases with images, symptoms, and solutions.</p>
                
                <div class="form-group">
                    <input type="text" class="form-control" id="disease-search" placeholder="Search for a disease..." data-translate-placeholder="search_disease">
                </div>
                
                <div class="search-results" id="disease-results">
                    <!-- Disease search results populated by JavaScript -->
                </div>
                
                <div class="remedy-options" id="disease-details" style="display: none;">
                    <!-- Disease details populated by JavaScript -->
                </div>
            </div>
            
            <div class="analytics-grid" id="smart-analytics-content" style="display: none;">
                <div class="analytics-card">
                    <div class="card-header">
                        <div class="card-title">Growth Rate Analysis</div>
                        <div class="card-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="growth-chart"></canvas>
                    </div>
                    <p>Track the growth rates of your crops over time to optimize planting schedules.</p>
                </div>
                
                <div class="analytics-card">
                    <div class="card-header">
                        <div class="card-title">Disease Trends</div>
                        <div class="card-icon">
                            <i class="fas fa-bug"></i>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="disease-trend-chart"></canvas>
                    </div>
                    <p>Monitor disease patterns to implement preventive measures effectively.</p>
                </div>
                
                <div class="analytics-card">
                    <div class="card-header">
                        <div class="card-title">Expense Analysis</div>
                        <div class="card-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="expense-chart"></canvas>
                    </div>
                    <p>Analyze your farming expenses to identify cost-saving opportunities.</p>
                </div>
                
                <div class="analytics-card">
                    <div class="card-header">
                        <div class="card-title">Profit Analytics</div>
                        <div class="card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="profit-analytics-chart"></canvas>
                    </div>
                    <p>Track profit trends across different crops and seasons.</p>
                </div>
            </div>
            
            <!-- Add Remedy Section -->
            <div class="add-remedy-section" id="add-remedy-section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-translate="add_remedy">Add New Remedy</div>
                        <div class="card-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                    </div>
                    <p data-translate="add_remedy_desc">Add new remedies, bio pesticides, or fertilizers to the database.</p>
                    
                    <div class="remedy-type-buttons">
                        <div class="remedy-type-btn active" data-type="remedy">
                            <i class="fas fa-leaf" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <div data-translate="natural_remedies">Natural Remedies</div>
                        </div>
                        <div class="remedy-type-btn" data-type="bioPesticide">
                            <i class="fas fa-bug" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <div data-translate="bio_pesticides">Bio Pesticides</div>
                        </div>
                        <div class="remedy-type-btn" data-type="bioFertilizer">
                            <i class="fas fa-seedling" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <div data-translate="bio_fertilizers">Bio Fertilizers</div>
                        </div>
                    </div>
                    
                    <!-- Natural Remedy Form -->
                    <div class="remedy-form active" id="remedy-form">
                        <div class="form-group">
                            <label data-translate="remedy_name">Remedy Name</label>
                            <input type="text" class="form-control" id="remedy-name" placeholder="Enter remedy name">
                        </div>
                        <div class="form-group">
                            <label data-translate="target_crops">Target Crops</label>
                            <input type="text" class="form-control" id="remedy-crops" placeholder="Enter crops this remedy works for">
                        </div>
                        <div class="form-group">
                            <label data-translate="description">Description</label>
                            <textarea class="form-control" id="remedy-description" rows="3" placeholder="Enter detailed description"></textarea>
                        </div>
                        <div class="form-group">
                            <label data-translate="preparation_instructions">Preparation Instructions</label>
                            <textarea class="form-control" id="remedy-preparation" rows="3" placeholder="Enter preparation instructions"></textarea>
                        </div>
                        <div class="form-group">
                            <label data-translate="application_instructions">Application Instructions</label>
                            <textarea class="form-control" id="remedy-application" rows="3" placeholder="Enter application instructions"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Benefits</label>
                            <textarea class="form-control" id="remedy-benefits" rows="3" placeholder="Enter benefits of this remedy"></textarea>
                        </div>
                        <div class="form-group">
                            <label>For Which Diseases</label>
                            <input type="text" class="form-control" id="remedy-diseases" placeholder="Enter diseases this remedy treats">
                        </div>
                        <div class="form-group">
                            <label data-translate="upload_video">Upload Video Tutorial</label>
                            <div class="file-upload" id="remedy-video-upload">
                                <i class="fas fa-video" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <div data-translate="click_to_upload_video">Click to upload video</div>
                                <input type="file" id="remedy-video" accept="video/*" style="display: none;">
                            </div>
                        </div>
                        <button class="btn btn-primary" id="save-remedy" data-translate="save_remedy">Save Remedy</button>
                    </div>
                    
                    <!-- Bio Pesticide Form -->
                    <div class="remedy-form" id="bio-pesticide-form">
                        <div class="form-group">
                            <label data-translate="pesticide_name">Pesticide Name</label>
                            <input type="text" class="form-control" id="pesticide-name" placeholder="Enter pesticide name">
                        </div>
                        <div class="form-group">
                            <label data-translate="target_pests">Target Pests</label>
                            <input type="text" class="form-control" id="pesticide-pests" placeholder="Enter pests this pesticide targets">
                        </div>
                        <div class="form-group">
                            <label data-translate="target_crops">Target Crops</label>
                            <input type="text" class="form-control" id="pesticide-crops" placeholder="Enter crops this pesticide works for">
                        </div>
                        <div class="form-group">
                            <label data-translate="description">Description</label>
                            <textarea class="form-control" id="pesticide-description" rows="3" placeholder="Enter detailed description"></textarea>
                        </div>
                        <div class="form-group">
                            <label data-translate="preparation_instructions">Preparation Instructions</label>
                            <textarea class="form-control" id="pesticide-preparation" rows="3" placeholder="Enter preparation instructions"></textarea>
                        </div>
                        <div class="form-group">
                            <label data-translate="application_instructions">Application Instructions</label>
                            <textarea class="form-control" id="pesticide-application" rows="3" placeholder="Enter application instructions"></textarea>
                        </div>
                        <div class="form-group">
                            <label data-translate="safety_precautions">Safety Precautions</label>
                            <textarea class="form-control" id="pesticide-safety" rows="3" placeholder="Enter safety precautions"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Effectiveness</label>
                            <input type="text" class="form-control" id="pesticide-effectiveness" placeholder="Enter effectiveness percentage and duration">
                        </div>
                        <div class="form-group">
                            <label data-translate="upload_video">Upload Video Tutorial</label>
                            <div class="file-upload" id="pesticide-video-upload">
                                <i class="fas fa-video" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <div data-translate="click_to_upload_video">Click to upload video</div>
                                <input type="file" id="pesticide-video" accept="video/*" style="display: none;">
                            </div>
                        </div>
                        <button class="btn btn-primary" id="save-pesticide" data-translate="save_pesticide">Save Bio Pesticide</button>
                    </div>
                    
                    <!-- Bio Fertilizer Form -->
                    <div class="remedy-form" id="bio-fertilizer-form">
                        <div class="form-group">
                            <label data-translate="fertilizer_name">Fertilizer Name</label>
                            <input type="text" class="form-control" id="fertilizer-name" placeholder="Enter fertilizer name">
                        </div>
                        <div class="form-group">
                            <label data-translate="target_crops">Target Crops</label>
                            <input type="text" class="form-control" id="fertilizer-crops" placeholder="Enter crops this fertilizer works for">
                        </div>
                        <div class="form-group">
                            <label data-translate="nutrient_content">Nutrient Content</label>
                            <input type="text" class="form-control" id="fertilizer-nutrients" placeholder="Enter nutrient content (N-P-K)">
                        </div>
                        <div class="form-group">
                            <label data-translate="description">Description</label>
                            <textarea class="form-control" id="fertilizer-description" rows="3" placeholder="Enter detailed description"></textarea>
                        </div>
                        <div class="form-group">
                            <label data-translate="preparation_instructions">Preparation Instructions</label>
                            <textarea class="form-control" id="fertilizer-preparation" rows="3" placeholder="Enter preparation instructions"></textarea>
                        </div>
                        <div class="form-group">
                            <label data-translate="application_instructions">Application Instructions</label>
                            <textarea class="form-control" id="fertilizer-application" rows="3" placeholder="Enter application instructions"></textarea>
                        </div>
                        <div class="form-group">
                            <label data-translate="benefits">Benefits</label>
                            <textarea class="form-control" id="fertilizer-benefits" rows="3" placeholder="Enter benefits of using this fertilizer"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Application Frequency</label>
                            <input type="text" class="form-control" id="fertilizer-frequency" placeholder="Enter how often to apply">
                        </div>
                        <div class="form-group">
                            <label data-translate="upload_video">Upload Video Tutorial</label>
                            <div class="file-upload" id="fertilizer-video-upload">
                                <i class="fas fa-video" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <div data-translate="click_to_upload_video">Click to upload video</div>
                                <input type="file" id="fertilizer-video" accept="video/*" style="display: none;">
                            </div>
                        </div>
                        <button class="btn btn-primary" id="save-fertilizer" data-translate="save_fertilizer">Save Bio Fertilizer</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reports & Analytics Tab -->
        <section id="reports" class="tab-content">
            <h2 class="section-title" data-translate="reports_analytics">Reports & Analytics</h2>
            <p data-translate="reports_desc">Generate detailed reports and analyze your farm's performance.</p>
            
            <div class="dashboard">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-translate="sustainability_index">Sustainability Index</div>
                        <div class="card-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                    </div>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 3rem; color: var(--primary-green); font-weight: 700;" id="sustainability-score">85%</div>
                        <div data-translate="eco_score">Eco-Score</div>
                    </div>
                    <p id="sustainability-text" data-translate="sustainability_text_default">Your farm is performing well in sustainability metrics. You've reduced chemical usage by 40% compared to last year.</p>
                    <div class="progress-bar">
                        <div class="progress" id="sustainability-progress" style="width: 85%;"></div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-translate="smart_analytics">Smart Analytics</div>
                        <div class="card-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="profit-analytics-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <div class="card-title" data-translate="pdf_report_generator">PDF Report Generator</div>
                    <div class="card-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                </div>
                <p data-translate="pdf_report_desc">Generate a comprehensive PDF report with crop health summary, remedies used, profit prediction, and eco-score.</p>
                <button class="btn btn-primary" style="margin-top: 15px;" id="generate-pdf">
                    <i class="fas fa-download"></i> <span data-translate="generate_report">Generate Report</span>
                </button>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <div class="card-title" data-translate="gps_recommendations">GPS-Based Recommendations</div>
                    <div class="card-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                </div>
                <p id="gps-recommendation-text" data-translate="gps_recommendation_default">Based on your location in <strong id="current-location">Punjab, India</strong>, we recommend:</p>
                <ul style="margin: 15px 0; padding-left: 20px;" id="gps-recommendations-list">
                    <li data-translate="gps_recommendation_1">Plant wheat in November for best yield</li>
                    <li data-translate="gps_recommendation_2">Local market prices are 5% higher than state average</li>
                    <li data-translate="gps_recommendation_3">Irrigate every 10 days during dry season</li>
                </ul>
                <button class="btn btn-outline" id="update-location-btn">
                    <i class="fas fa-sync-alt"></i> <span data-translate="update_location">Update Location</span>
                </button>
                
                <div class="map-container" id="location-map" style="display: none;">
                    <div class="map-placeholder">
                        <i class="fas fa-map-marked-alt"></i>
                        <h3 data-translate="select_farm_location">Select Your Farm Location</h3>
                        <p data-translate="click_map_location">Click on the map to set your farm location</p>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <input type="text" class="form-control" id="country-input" placeholder="Country" data-translate-placeholder="country" value="India">
                            <input type="text" class="form-control" id="state-input" placeholder="State" data-translate-placeholder="state" value="Punjab">
                            <input type="text" class="form-control" id="district-input" placeholder="District" data-translate-placeholder="district" value="Ludhiana">
                        </div>
                        <button class="btn btn-primary" style="margin-top: 15px;" id="save-location" data-translate="save_location">Save Location</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Tab -->
        <section id="settings" class="tab-content">
            <h2 class="section-title" data-translate="settings">Settings</h2>
            <p data-translate="settings_desc">Configure your AgriSmart Adviser preferences and notifications.</p>
            
            <div class="settings-section">
                <div class="settings-grid">
                    <div class="setting-card">
                        <div class="setting-header">
                            <div class="setting-title" data-translate="voice_input">Voice Input</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="voice-input-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <p data-translate="voice_input_desc">Enable voice commands for hands-free operation.</p>
                    </div>
                    
                    <div class="setting-card">
                        <div class="setting-header">
                            <div class="setting-title" data-translate="smart_alerts">Smart Alerts</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="smart-alerts-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <p data-translate="smart_alerts_desc">Receive notifications for weather changes, market prices, and disease detection.</p>
                    </div>
                    
                    <div class="setting-card">
                        <div class="setting-header">
                            <div class="setting-title" data-translate="weather_alerts">Weather Alerts</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="weather-alerts-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <p data-translate="weather_alerts_desc">Get notified about weather changes that may affect your crops.</p>
                    </div>
                    
                    <div class="setting-card">
                        <div class="setting-header">
                            <div class="setting-title" data-translate="market_price_alerts">Market Price Alerts</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="market-alerts-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <p data-translate="market_price_alerts_desc">Receive updates on market price changes for your crops.</p>
                    </div>
                    
                    <div class="setting-card">
                        <div class="setting-header">
                            <div class="setting-title" data-translate="disease_alerts">Disease Detection Alerts</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="disease-alerts-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <p data-translate="disease_alerts_desc">Get notified when potential diseases are detected in your crops.</p>
                    </div>
                    
                    <div class="setting-card">
                        <div class="setting-header">
                            <div class="setting-title" data-translate="location_services">Location Services</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="location-services-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <p data-translate="location_services_desc">Allow the app to use your location for personalized recommendations.</p>
                    </div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <div class="card-title" data-translate="account_settings">Account Settings</div>
                    <div class="card-icon">
                        <i class="fas fa-user-cog"></i>
                    </div>
                </div>
                <div class="form-group">
                    <label data-translate="language_preference">Language Preference</label>
                    <select class="form-control" id="language-preference">
                        <option value="en">English</option>
                        <option value="hi">Hindi</option>
                        <option value="as">Assamese</option>
                        <option value="bn">Bengali</option>
                        <option value="gu">Gujarati</option>
                        <option value="kn">Kannada</option>
                        <option value="ml">Malayalam</option>
                        <option value="mr">Marathi</option>
                        <option value="or">Odia</option>
                        <option value="pa">Punjabi</option>
                        <option value="ta">Tamil</option>
                        <option value="te">Telugu</option>
                        <option value="ur">Urdu</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-translate="notification_frequency">Notification Frequency</label>
                    <select class="form-control" id="notification-frequency">
                        <option value="immediate" data-translate="immediate">Immediate</option>
                        <option value="daily" data-translate="daily">Daily Summary</option>
                        <option value="weekly" data-translate="weekly">Weekly Summary</option>
                    </select>
                </div>
                <button class="btn btn-primary" id="save-settings" data-translate="save_settings">Save Settings</button>
            </div>
        </section>
    </main>

    <!-- AI Chatbot -->
    <div class="chatbot-container">
        <div class="chatbot-btn" id="chatbot-toggle">
            <i class="fas fa-robot"></i>
        </div>
        <div class="chatbot-window" id="chatbot-window">
            <div class="chatbot-header">
                <div class="chatbot-logo">
                    <div class="logo-img" style="width: 30px; height: 30px;">
                        <i class="fas fa-seedling" style="color: var(--primary-green); font-size: 0.9rem;"></i>
                    </div>
                    <span>AgriSmart Adviser</span>
                </div>
                <div>
                    <i class="fas fa-times" id="chatbot-close"></i>
                </div>
            </div>
            <div class="chatbot-messages" id="chatbot-messages">
                <div class="message bot-message" data-translate="chatbot_welcome">
                    Hello! I'm your AgriSmart Adviser assistant. How can I help you with your farming today?
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatbot-input" placeholder="Type your message..." data-translate-placeholder="type_message">
                <button id="chatbot-send"><i class="fas fa-paper-plane"></i></button>
                <button id="chatbot-voice"><i class="fas fa-microphone"></i></button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-title">AgriSmart Adviser</div>
                    <p data-translate="footer_desc">Smart farm management powered by AI and IoT technology to help farmers maximize yields and profits sustainably.</p>
                </div>
                <div class="footer-section">
                    <div class="footer-title" data-translate="quick_links">Quick Links</div>
                    <ul class="footer-links">
                        <li><a href="#crop-health" data-translate="crop_health">Crop Health</a></li>
                        <li><a href="#market-profit" data-translate="market_profit">Market Tools</a></li>
                        <li><a href="#ai-iot" data-translate="ai_iot">AI & IoT</a></li>
                        <li><a href="#database" data-translate="database">Knowledge Base</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 AgriSmart Adviser.
            </div>
        </div>
    </footer>

    <!-- Auth Modal -->
    <div class="modal" id="auth-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-translate="sign_in">Sign In</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">Login</button>
                    <button class="auth-tab" data-tab="register">Register</button>
                </div>
                
                <div id="login-form" class="auth-form active">
                    <div class="form-group">
                        <label data-translate="username">Username</label>
                        <input type="text" class="form-control" id="login-username" placeholder="Enter your username">
                    </div>
                    <div class="form-group">
                        <label data-translate="password">Password</label>
                        <input type="password" class="form-control" id="login-password" placeholder="Enter your password">
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" id="login-btn" data-translate="sign_in">Sign In</button>
                    
                    <div class="social-login">
                        <p data-translate="or_continue_with">Or continue with</p>
                        <div class="social-buttons">
                            <button class="btn btn-social google" id="google-login" data-translate="google">Google</button>
                            <button class="btn btn-social facebook" id="facebook-login" data-translate="facebook">Facebook</button>
                        </div>
                    </div>
                </div>
                
                <div id="register-form" class="auth-form">
                    <div class="form-group">
                        <label data-translate="full_name">Full Name</label>
                        <input type="text" class="form-control" id="register-name" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label data-translate="username">Username</label>
                        <input type="text" class="form-control" id="register-username" placeholder="Choose a username">
                    </div>
                    <div class="form-group">
                        <label data-translate="email">Email</label>
                        <input type="email" class="form-control" id="register-email" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label data-translate="password">Password</label>
                        <input type="password" class="form-control" id="register-password" placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label data-translate="confirm_password">Confirm Password</label>
                        <input type="password" class="form-control" id="register-confirm-password" placeholder="Confirm your password">
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" id="register-btn" data-translate="create_account">Create Account</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Disease Details Modal -->
    <div class="modal" id="disease-details-modal">
        <div class="modal-content disease-details-modal">
            <div class="modal-header">
                <h3 id="disease-modal-title">Disease Details</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="disease-modal-body">
                <!-- Disease details populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Remedy Details Modal -->
    <div class="modal" id="remedy-details-modal">
        <div class="modal-content disease-details-modal">
            <div class="modal-header">
                <h3 id="remedy-modal-title">Remedy Details</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="remedy-modal-body">
                <!-- Remedy details populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Application Data
        const appData = {
            currentLanguage: 'en',
            userLocation: 'Punjab, India',
            currentUser: null,
            farmData: {
                crops: [],
                soilData: {},
                sensorData: {}
            },
            // Enhanced remedies database with 10 remedies for each category
            remedies: {
                'Leaf Rust': {
                    natural: [
                        { 
                            name: 'Neem Oil Spray', 
                            description: 'Effective against fungal diseases like leaf rust. Mix 2 tablespoons of neem oil with 1 gallon of water.',
                            details: {
                                ingredients: ['Neem oil (2 tablespoons)', 'Water (1 gallon)', 'Liquid soap (few drops)'],
                                preparation: 'Mix neem oil with water and add liquid soap. Shake well before use.',
                                application: 'Spray early morning or late evening. Cover both sides of leaves. Repeat every 7-10 days.',
                                benefits: 'Controls fungal diseases, repels insects, acts as foliar fertilizer',
                                crops: 'Wheat, Rice, Corn, Vegetables',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        },
                        { 
                            name: 'Garlic Solution', 
                            description: 'Natural fungicide and insect repellent. Crush 10-12 garlic cloves in 1 liter water.',
                            details: {
                                ingredients: ['Garlic cloves (10-12)', 'Water (1 liter)', 'Mineral oil (optional)'],
                                preparation: 'Crush garlic and soak in water overnight. Strain and use the liquid.',
                                application: 'Spray on affected plants weekly. Best applied in cool weather.',
                                benefits: 'Antifungal, antibacterial, insect repellent',
                                crops: 'All vegetables, Fruits, Grains',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        },
                        { 
                            name: 'Baking Soda Spray', 
                            description: 'Controls fungal diseases. Mix 1 tablespoon baking soda in 1 gallon water.',
                            details: {
                                ingredients: ['Baking soda (1 tablespoon)', 'Water (1 gallon)', 'Liquid soap (1/2 teaspoon)'],
                                preparation: 'Dissolve baking soda in water. Add liquid soap and mix well.',
                                application: 'Spray every 5-7 days. Avoid spraying in direct sunlight.',
                                benefits: 'Controls powdery mildew, leaf spot, rust diseases',
                                crops: 'Cucumbers, Squash, Roses, Grapes',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        },
                        { 
                            name: 'Horsetail Tea', 
                            description: 'Silica-rich spray that strengthens plants against diseases.',
                            details: {
                                ingredients: ['Fresh horsetail (100g)', 'Water (1 liter)'],
                                preparation: 'Boil horsetail in water for 20 minutes. Strain and dilute 1:5 with water.',
                                application: 'Spray every 2 weeks during growing season.',
                                benefits: 'Strengthens cell walls, prevents fungal attacks',
                                crops: 'Tomatoes, Potatoes, Fruit trees',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        },
                        { 
                            name: 'Compost Tea', 
                            description: 'Beneficial microbe spray that improves plant immunity.',
                            details: {
                                ingredients: ['Compost (1 part)', 'Water (5 parts)', 'Molasses (1 tablespoon)'],
                                preparation: 'Brew for 24-48 hours with aeration. Strain before use.',
                                application: 'Spray on leaves or use as soil drench every 2 weeks.',
                                benefits: 'Improves soil health, enhances plant immunity',
                                crops: 'All crops',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        }
                    ],
                    bioPesticides: [
                        { 
                            name: 'Bacillus Thuringiensis (Bt)', 
                            description: 'Effective against caterpillars and leaf-eating worms.',
                            details: {
                                type: 'Bacterial biopesticide',
                                target: 'Caterpillars, Armyworms, Hornworms',
                                application: 'Mix according to package. Spray when pests are small.',
                                safety: 'Safe for humans, pets, and beneficial insects',
                                crops: 'Cabbage, Tomatoes, Corn, Cotton',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        },
                        { 
                            name: 'Neem-based Pesticide', 
                            description: 'Broad-spectrum insecticide from neem seeds.',
                            details: {
                                type: 'Botanical insecticide',
                                target: 'Aphids, Whiteflies, Mealybugs, Beetles',
                                application: 'Dilute as per instructions. Spray every 7-10 days.',
                                safety: 'Low toxicity to beneficial insects',
                                crops: 'All vegetables, Fruits, Ornamentals',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        },
                        { 
                            name: 'Spinosad', 
                            description: 'Natural substance from soil bacteria.',
                            details: {
                                type: 'Bacterial derivative',
                                target: 'Thrips, Caterpillars, Leafminers',
                                application: 'Spray in evening to protect bees.',
                                safety: 'Toxic to bees when wet',
                                crops: 'Fruits, Vegetables, Ornamentals',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        }
                    ],
                    bioFertilizers: [
                        { 
                            name: 'Vermicompost', 
                            description: 'Nutrient-rich compost from earthworm activity.',
                            details: {
                                nutrients: 'N-P-K: 1-0.5-0.5, plus micronutrients',
                                preparation: 'Produced by earthworms from organic waste',
                                application: 'Mix 2-3 kg per square meter in soil.',
                                benefits: 'Improves soil structure, water retention',
                                crops: 'All crops',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        },
                        { 
                            name: 'Rhizobium Biofertilizer', 
                            description: 'Nitrogen-fixing bacteria for legumes.',
                            details: {
                                nutrients: 'Fixes atmospheric nitrogen',
                                preparation: 'Carrier-based bacterial culture',
                                application: 'Seed treatment before sowing.',
                                benefits: 'Reduces nitrogen fertilizer requirement',
                                crops: 'Pulses, Soybean, Groundnut',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        },
                        { 
                            name: 'Azotobacter', 
                            description: 'Free-living nitrogen-fixing bacteria.',
                            details: {
                                nutrients: 'Fixes 20-40 kg nitrogen per hectare',
                                preparation: 'Carrier-based formulation',
                                application: 'Seed treatment or soil application.',
                                benefits: 'Works for non-legume crops',
                                crops: 'Wheat, Rice, Vegetables',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        }
                    ]
                },
                'Powdery Mildew': {
                    natural: [
                        { 
                            name: 'Milk Spray Solution', 
                            description: 'Highly effective against powdery mildew. Mix 1 part milk with 9 parts water.',
                            details: {
                                ingredients: ['Milk (40%)', 'Water (60%)'],
                                preparation: 'Mix milk and water thoroughly. No heating required.',
                                application: 'Spray every 5-7 days. Apply in morning.',
                                benefits: 'Controls mildew, provides nutrients',
                                crops: 'Cucumbers, Squash, Grapes, Roses',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        }
                    ],
                    bioPesticides: [
                        { 
                            name: 'Sulfur Spray', 
                            description: 'Effective fungicide for powdery mildew control.',
                            details: {
                                type: 'Mineral fungicide',
                                target: 'Powdery mildew, Rust, Scab',
                                application: 'Apply as dust or spray in cool weather.',
                                safety: 'Avoid application in hot weather',
                                crops: 'Grapes, Apples, Vegetables',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        }
                    ],
                    bioFertilizers: [
                        { 
                            name: 'Seaweed Extract', 
                            description: 'Rich in micronutrients that enhance disease resistance.',
                            details: {
                                nutrients: 'Rich in micronutrients and growth hormones',
                                preparation: 'Liquid extract from seaweeds',
                                application: 'Foliar spray (2-3 ml per liter).',
                                benefits: 'Improves stress tolerance and yield',
                                crops: 'All crops',
                                video: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                            }
                        }
                    ]
                }
            },
            // Enhanced crop diseases database
            cropDiseases: {
                'Leaf Rust': {
                    symptoms: 'Orange-brown pustules on leaves, yellowing of foliage, reduced photosynthesis',
                    causes: 'Fungal infection (Puccinia species), high humidity, poor air circulation',
                    prevention: 'Plant resistant varieties, proper spacing, avoid overhead irrigation',
                    treatment: 'Remove infected leaves, apply fungicides, improve air circulation',
                    affectedCrops: ['Wheat', 'Barley', 'Oats', 'Coffee'],
                    severity: 'High',
                    season: 'Rainy season',
                    image: 'https://via.placeholder.com/400x300?text=Leaf+Rust+Image'
                },
                'Powdery Mildew': {
                    symptoms: 'White powdery spots on leaves and stems, leaf curling, stunted growth',
                    causes: 'Fungal infection, high humidity, poor air circulation',
                    prevention: 'Proper spacing, morning watering, resistant varieties',
                    treatment: 'Sulfur sprays, baking soda solution, milk spray',
                    affectedCrops: ['Cucumber', 'Squash', 'Grapes', 'Roses'],
                    severity: 'Medium',
                    season: 'Warm dry weather',
                    image: 'https://via.placeholder.com/400x300?text=Powdery+Mildew+Image'
                }
            },
            // Market price data based on location
            marketPrices: {
                'Punjab, India': {
                    wheat: { current: 2100, trend: 'up', change_percentage: 5 },
                    rice: { current: 2800, trend: 'stable', change_percentage: 0 },
                    corn: { current: 1800, trend: 'down', change_percentage: -3 },
                    soybean: { current: 4200, trend: 'up', change_percentage: 8 },
                    cotton: { current: 5800, trend: 'stable', change_percentage: 2 }
                }
            },
            // Crop recommendations based on location and conditions
            cropRecommendations: {
                'Punjab, India': {
                    low_ph: ['Potato', 'Sweet potato', 'Blueberries'],
                    high_ph: ['Cabbage', 'Cauliflower', 'Asparagus'],
                    low_water: ['Millet', 'Sorghum', 'Chickpea'],
                    high_water: ['Rice', 'Sugarcane', 'Jute'],
                    crop_rotation: {
                        wheat: ['Legumes', 'Oilseeds', 'Pulses'],
                        rice: ['Wheat', 'Mustard', 'Vegetables'],
                        corn: ['Soybean', 'Wheat', 'Pulses']
                    }
                }
            },
            languages: [
                { code: 'en', name: 'English' },
                { code: 'hi', name: 'Hindi' },
                { code: 'as', name: 'Assamese' },
                { code: 'bn', name: 'Bengali' }
            ],
            translations: {
                'en': {
                    'crop_health': 'Crop Health',
                    'market_profit': 'Market & Profit',
                    'ai_iot': 'AI & IoT',
                    'database': 'Database',
                    'reports_analytics': 'Reports & Analytics',
                    'settings': 'Settings',
                    'crop_health_detection': 'Crop Health Detection',
                    'crop_health_desc': 'Upload or take a photo of your crop to detect diseases and get treatment recommendations.',
                    'start_camera': 'Start Camera',
                    'capture_photo': 'Capture Photo',
                    'upload_photo': 'Upload Photo',
                    'analyze_photo': 'Analyze Photo',
                    'detection_results': 'Detection Results:',
                    'confidence': 'Confidence:',
                    'location_based_recommendation': 'Based on your location and crop conditions, we recommend the following treatments.',
                    'natural_remedies': 'Natural Remedies',
                    'bio_pesticides': 'Bio Pesticides',
                    'bio_fertilizers': 'Bio Fertilizers',
                    'market_profit_tools': 'Market & Profit Tools',
                    'market_price_prediction': 'Market Price Prediction',
                    'market_price_desc': 'Get real-time market prices for your crops based on location and demand.',
                    'get_price_prediction': 'Get Price Prediction',
                    'crop_planning_advisor': 'Crop Planning Advisor',
                    'crop_planning_desc': 'Get AI-powered suggestions for the best next crop based on your soil and previous crops.',
                    'last_crop_1': 'Last Crop 1',
                    'last_crop_2': 'Last Crop 2',
                    'soil_ph': 'Soil pH',
                    'enter_soil_ph': 'Enter soil pH',
                    'water_availability': 'Water Availability',
                    'low': 'Low',
                    'medium': 'Medium',
                    'high': 'High',
                    'location': 'Location',
                    'state_district_country': 'State, District, Country',
                    'get_crop_recommendation': 'Get Crop Recommendation',
                    'profit_maximizer': 'Profit Maximizer',
                    'profit_maximizer_desc': 'Optimize your farming strategy to maximize profits with AI recommendations.',
                    'profit_increase': 'By following our recommendations, your profit can increase by 23% this season.',
                    'simulation_mode': 'Simulation Mode',
                    'simulation_desc': 'Simulate crop growth and profit based on different conditions.',
                    'crop_name': 'Crop Name',
                    'enter_your_location': 'Enter your location',
                    'run_simulation': 'Run Simulation',
                    'ai_iot_integration': 'AI & IoT Integration',
                    'ai_iot_desc': 'Monitor your farm in real-time with IoT sensors and AI analytics.',
                    'soil_moisture': 'Soil Moisture',
                    'optimal': 'Optimal',
                    'temperature': 'Temperature',
                    'normal': 'Normal',
                    'humidity': 'Humidity',
                    'smart_irrigation_advice': 'Smart Irrigation Advice',
                    'irrigation_advice_default': 'Based on current soil moisture and weather forecast, we recommend:',
                    'irrigation_advice_1': 'Water crops tomorrow at 6:00 AM',
                    'irrigation_advice_2': 'Use 2.5 liters per square meter',
                    'irrigation_advice_3': 'Focus irrigation on the northern section',
                    'set_irrigation_schedule': 'Set Irrigation Schedule',
                    'save_schedule': 'Save Schedule',
                    'live_soil_camera': 'Live Soil Camera',
                    'live_camera_desc': 'Monitor your soil conditions with our live camera feed.',
                    'live_soil_camera_feed': 'Live Soil Camera Feed',
                    'connect_camera_desc': 'Connect your IoT camera to view live soil conditions',
                    'connect_camera': 'Connect Camera',
                    'knowledge_database': 'Knowledge Database',
                    'knowledge_database_desc': 'Access our comprehensive database of crop diseases, natural remedies, and farming techniques.',
                    'natural_solution_database': 'Natural Solution Database',
                    'natural_solution_desc': 'Browse verified natural remedies for common crop diseases and pests.',
                    'crop_disease_library': 'Crop Disease Library',
                    'crop_disease_desc': 'Searchable offline database of crop diseases with images and solutions.',
                    'smart_analytics': 'Smart Analytics',
                    'smart_analytics_desc': 'Track growth rates, disease trends, expenses, and profit analytics.',
                    'natural_solution_search_desc': 'Browse all natural solutions, bio pesticides, and bio fertilizers.',
                    'all': 'All',
                    'search_disease': 'Search for a disease...',
                    'reports_analytics': 'Reports & Analytics',
                    'reports_desc': 'Generate detailed reports and analyze your farm\'s performance.',
                    'sustainability_index': 'Sustainability Index',
                    'eco_score': 'Eco-Score',
                    'sustainability_text_default': 'Your farm is performing well in sustainability metrics. You\'ve reduced chemical usage by 40% compared to last year.',
                    'pdf_report_generator': 'PDF Report Generator',
                    'pdf_report_desc': 'Generate a comprehensive PDF report with crop health summary, remedies used, profit prediction, and eco-score.',
                    'generate_report': 'Generate Report',
                    'gps_recommendations': 'GPS-Based Recommendations',
                    'gps_recommendation_default': 'Based on your location in',
                    'gps_recommendation_1': 'Plant wheat in November for best yield',
                    'gps_recommendation_2': 'Local market prices are 5% higher than state average',
                    'gps_recommendation_3': 'Irrigate every 10 days during dry season',
                    'update_location': 'Update Location',
                    'select_farm_location': 'Select Your Farm Location',
                    'click_map_location': 'Click on the map to set your farm location',
                    'country': 'Country',
                    'state': 'State',
                    'district': 'District',
                    'save_location': 'Save Location',
                    'footer_desc': 'Smart farm management powered by AI and IoT technology to help farmers maximize yields and profits sustainably.',
                    'quick_links': 'Quick Links',
                    'chatbot_welcome': 'Hello! I\'m your AgriSmart Adviser assistant. How can I help you with your farming today?',
                    'type_message': 'Type your message...',
                    'sign_in': 'Sign In',
                    'username': 'Username',
                    'password': 'Password',
                    'or_continue_with': 'Or continue with',
                    'google': 'Google',
                    'facebook': 'Facebook',
                    'full_name': 'Full Name',
                    'email': 'Email',
                    'confirm_password': 'Confirm Password',
                    'create_account': 'Create Account',
                    'login': 'Login',
                    'register': 'Register',
                    'settings_desc': 'Configure your AgriSmart Adviser preferences and notifications.',
                    'voice_input': 'Voice Input',
                    'voice_input_desc': 'Enable voice commands for hands-free operation.',
                    'smart_alerts': 'Smart Alerts',
                    'smart_alerts_desc': 'Receive notifications for weather changes, market prices, and disease detection.',
                    'weather_alerts': 'Weather Alerts',
                    'weather_alerts_desc': 'Get notified about weather changes that may affect your crops.',
                    'market_price_alerts': 'Market Price Alerts',
                    'market_price_alerts_desc': 'Receive updates on market price changes for your crops.',
                    'disease_alerts': 'Disease Detection Alerts',
                    'disease_alerts_desc': 'Get notified when potential diseases are detected in your crops.',
                    'location_services': 'Location Services',
                    'location_services_desc': 'Allow the app to use your location for personalized recommendations.',
                    'account_settings': 'Account Settings',
                    'language_preference': 'Language Preference',
                    'notification_frequency': 'Notification Frequency',
                    'immediate': 'Immediate',
                    'daily': 'Daily Summary',
                    'weekly': 'Weekly Summary',
                    'save_settings': 'Save Settings',
                    'logout': 'Logout',
                    'add_remedy': 'Add Remedy',
                    'add_remedy_desc': 'Add new remedies, bio pesticides, or fertilizers to the database.',
                    'remedy_name': 'Remedy Name',
                    'target_crops': 'Target Crops',
                    'description': 'Description',
                    'preparation_instructions': 'Preparation Instructions',
                    'application_instructions': 'Application Instructions',
                    'upload_video': 'Upload Video Tutorial',
                    'click_to_upload_video': 'Click to upload video',
                    'save_remedy': 'Save Remedy',
                    'pesticide_name': 'Pesticide Name',
                    'target_pests': 'Target Pests',
                    'safety_precautions': 'Safety Precautions',
                    'save_pesticide': 'Save Bio Pesticide',
                    'fertilizer_name': 'Fertilizer Name',
                    'nutrient_content': 'Nutrient Content',
                    'benefits': 'Benefits',
                    'save_fertilizer': 'Save Bio Fertilizer'
                },
                'hi': {
                    'crop_health': 'फसल स्वास्थ्य',
                    'market_profit': 'बाजार और लाभ',
                    'ai_iot': 'एआई और आईओटी',
                    'database': 'डेटाबेस',
                    'reports_analytics': 'रिपोर्ट और विश्लेषण',
                    'settings': 'सेटिंग्स',
                    'crop_health_detection': 'फसल स्वास्थ्य जांच',
                    'crop_health_desc': 'फसल की बीमारियों का पता लगाने और उपचार सुझाव प्राप्त करने के लिए अपनी फसल की फोटो अपलोड करें या खींचें।',
                    'start_camera': 'कैमरा शुरू करें',
                    'capture_photo': 'फोटो खींचें',
                    'upload_photo': 'फोटो अपलोड करें',
                    'analyze_photo': 'फोटो विश्लेषण करें',
                    'detection_results': 'जांच परिणाम:',
                    'confidence': 'विश्वास:',
                    'location_based_recommendation': 'आपके स्थान और फसल की स्थिति के आधार पर, हम निम्नलिखित उपचारों की सलाह देते हैं।',
                    'natural_remedies': 'प्राकृतिक उपचार',
                    'bio_pesticides': 'जैव कीटनाशक',
                    'bio_fertilizers': 'जैव उर्वरक',
                    'market_profit_tools': 'बाजार और लाभ उपकरण',
                    'market_price_prediction': 'बाजार मूल्य भविष्यवाणी',
                    'market_price_desc': 'स्थान और मांग के आधार पर अपनी फसलों के लिए रीयल-टाइम बाजार मूल्य प्राप्त करें।',
                    'get_price_prediction': 'मूल्य भविष्यवाणी प्राप्त करें',
                    'crop_planning_advisor': 'फसल योजना सलाहकार',
                    'crop_planning_desc': 'अपनी मिट्टी और पिछली फसलों के आधार पर अगली सर्वोत्तम फसल के लिए एआई-संचालित सुझाव प्राप्त करें।',
                    'last_crop_1': 'पिछली फसल 1',
                    'last_crop_2': 'पिछली फसल 2',
                    'soil_ph': 'मिट्टी का पीएच',
                    'enter_soil_ph': 'मिट्टी का पीएच दर्ज करें',
                    'water_availability': 'पानी की उपलब्धता',
                    'low': 'कम',
                    'medium': 'मध्यम',
                    'high': 'उच्च',
                    'location': 'स्थान',
                    'state_district_country': 'राज्य, जिला, देश',
                    'get_crop_recommendation': 'फसल सिफारिश प्राप्त करें',
                    'profit_maximizer': 'लाभ अधिकतमकर्ता',
                    'profit_maximizer_desc': 'एआई सिफारिशों के साथ लाभ को अधिकतम करने के लिए अपनी खेती की रणनीति को अनुकूलित करें।',
                    'profit_increase': 'हमारी सिफारिशों का पालन करके, इस मौसम में आपका लाभ 23% बढ़ सकता है।',
                    'simulation_mode': 'सिमुलेशन मोड',
                    'simulation_desc': 'विभिन्न स्थितियों के आधार पर फसल विकास और लाभ का अनुकरण करें।',
                    'crop_name': 'फसल का नाम',
                    'enter_your_location': 'अपना स्थान दर्ज करें',
                    'run_simulation': 'सिमुलेशन चलाएं',
                    'ai_iot_integration': 'एआई और आईओटी एकीकरण',
                    'ai_iot_desc': 'आईओटी सेंसर और एआई एनालिटिक्स के साथ अपने खेत की रीयल-टाइम निगरानी करें।',
                    'soil_moisture': 'मिट्टी की नमी',
                    'optimal': 'इष्टतम',
                    'temperature': 'तापमान',
                    'normal': 'सामान्य',
                    'humidity': 'आर्द्रता',
                    'smart_irrigation_advice': 'स्मार्ट सिंचाई सलाह',
                    'irrigation_advice_default': 'वर्तमान मिट्टी की नमी और मौसम पूर्वानुमान के आधार पर, हम सलाह देते हैं:',
                    'irrigation_advice_1': 'कल सुबह 6:00 बजे फसलों को पानी दें',
                    'irrigation_advice_2': 'प्रति वर्ग मीटर 2.5 लीटर पानी का उपयोग करें',
                    'irrigation_advice_3': 'उत्तरी भाग पर सिंचाई पर ध्यान केंद्रित करें',
                    'set_irrigation_schedule': 'सिंचाई अनुसूची सेट करें',
                    'save_schedule': 'अनुसूची सहेजें',
                    'live_soil_camera': 'लाइव मिट्टी कैमरा',
                    'live_camera_desc': 'हमारे लाइव कैमरा फीड के साथ अपनी मिट्टी की स्थितियों की निगरानी करें।',
                    'live_soil_camera_feed': 'लाइव मिट्टी कैमरा फीड',
                    'connect_camera_desc': 'लाइव मिट्टी की स्थितियों को देखने के लिए अपना आईओटी कैमरा कनेक्ट करें',
                    'connect_camera': 'कैमरा कनेक्ट करें',
                    'knowledge_database': 'ज्ञान डेटाबेस',
                    'knowledge_database_desc': 'फसल रोगों, प्राकृतिक उपचारों और खेती तकनीकों के हमारे व्यापक डेटाबेस तक पहुंचें।',
                    'natural_solution_database': 'प्राकृतिक समाधान डेटाबेस',
                    'natural_solution_desc': 'सामान्य फसल रोगों और कीटों के लिए सत्यापित प्राकृतिक उपचार ब्राउज़ करें।',
                    'crop_disease_library': 'फसल रोग लाइब्रेरी',
                    'crop_disease_desc': 'छवियों और समाधानों के साथ फसल रोगों का खोज योग्य ऑफ़लाइन डेटाबेस।',
                    'smart_analytics': 'स्मार्ट एनालिटिक्स',
                    'smart_analytics_desc': 'विकास दर, रोग रुझान, खर्च और लाभ एनालिटिक्स ट्रैक करें।',
                    'natural_solution_search_desc': 'सभी प्राकृतिक समाधान, जैव कीटनाशक और जैव उर्वरक ब्राउज़ करें।',
                    'all': 'सभी',
                    'search_disease': 'रोग खोजें...',
                    'reports_analytics': 'रिपोर्ट और विश्लेषण',
                    'reports_desc': 'विस्तृत रिपोर्ट तैयार करें और अपने खेत के प्रदर्शन का विश्लेषण करें।',
                    'sustainability_index': 'सस्टेनेबिलिटी इंडेक्स',
                    'eco_score': 'ईको-स्कोर',
                    'sustainability_text_default': 'आपका खेत सस्टेनेबिलिटी मेट्रिक्स में अच्छा प्रदर्शन कर रहा है। आपने पिछले वर्ष की तुलना में रासायनिक उपयोग में 40% की कमी की है।',
                    'pdf_report_generator': 'पीडीएफ रिपोर्ट जनरेटर',
                    'pdf_report_desc': 'फसल स्वास्थ्य सारांश, उपयोग किए गए उपचार, लाभ भविष्यवाणी और ईको-स्कोर के साथ एक व्यापक पीडीएफ रिपोर्ट तैयार करें।',
                    'generate_report': 'रिपोर्ट जनरेट करें',
                    'gps_recommendations': 'जीपीएस-आधारित सिफारिशें',
                    'gps_recommendation_default': 'आपके स्थान के आधार पर',
                    'gps_recommendation_1': 'सर्वोत्तम उपज के लिए नवंबर में गेहूं बोएं',
                    'gps_recommendation_2': 'स्थानीय बाजार मूल्य राज्य औसत से 5% अधिक हैं',
                    'gps_recommendation_3': 'सूखे मौसम के दौरान हर 10 दिनों में सिंचाई करें',
                    'update_location': 'स्थान अपडेट करें',
                    'select_farm_location': 'अपना खेत स्थान चुनें',
                    'click_map_location': 'अपना खेत स्थान सेट करने के लिए मानचित्र पर क्लिक करें',
                    'country': 'देश',
                    'state': 'राज्य',
                    'district': 'जिला',
                    'save_location': 'स्थान सहेजें',
                    'footer_desc': 'किसानों को उपज और लाभ को अधिकतम करने में मदद करने के लिए एआई और आईओटी तकनीक द्वारा संचालित स्मार्ट फार्म प्रबंधन।',
                    'quick_links': 'त्वरित लिंक',
                    'chatbot_welcome': 'नमस्ते! मैं आपका एग्रीस्मार्ट एडवाइजर सहायक हूं। आज मैं आपकी खेती में कैसे मदद कर सकता हूं?',
                    'type_message': 'अपना संदेश टाइप करें...',
                    'sign_in': 'साइन इन',
                    'username': 'उपयोगकर्ता नाम',
                    'password': 'पासवर्ड',
                    'or_continue_with': 'या के साथ जारी रखें',
                    'google': 'गूगल',
                    'facebook': 'फेसबुक',
                    'full_name': 'पूरा नाम',
                    'email': 'ईमेल',
                    'confirm_password': 'पासवर्ड की पुष्टि करें',
                    'create_account': 'खाता बनाएं',
                    'login': 'लॉगिन',
                    'register': 'रजिस्टर',
                    'settings_desc': 'अपनी एग्रीस्मार्ट एडवाइजर प्राथमिकताएं और सूचनाएं कॉन्फ़िगर करें।',
                    'voice_input': 'वॉइस इनपुट',
                    'voice_input_desc': 'हैंड्स-फ्री ऑपरेशन के लिए वॉइस कमांड सक्षम करें।',
                    'smart_alerts': 'स्मार्ट अलर्ट',
                    'smart_alerts_desc': 'मौसम परिवर्तन, बाजार मूल्य और बीमारी का पता लगाने के लिए सूचनाएं प्राप्त करें।',
                    'weather_alerts': 'मौसम अलर्ट',
                    'weather_alerts_desc': 'मौसम परिवर्तन के बारे में सूचित करें जो आपकी फसलों को प्रभावित कर सकते हैं।',
                    'market_price_alerts': 'बाजार मूल्य अलर्ट',
                    'market_price_alerts_desc': 'अपनी फसलों के लिए बाजार मूल्य परिवर्तन पर अपडेट प्राप्त करें।',
                    'disease_alerts': 'बीमारी का पता लगाने वाले अलर्ट',
                    'disease_alerts_desc': 'जब आपकी फसलों में संभावित बीमारियों का पता चलता है तो सूचित करें।',
                    'location_services': 'लोकेशन सर्विसेज',
                    'location_services_desc': 'व्यक्तिगत सिफारिशों के लिए ऐप को आपके स्थान का उपयोग करने की अनुमति दें।',
                    'account_settings': 'खाता सेटिंग्स',
                    'language_preference': 'भाषा प्राथमिकता',
                    'notification_frequency': 'सूचना आवृत्ति',
                    'immediate': 'तत्काल',
                    'daily': 'दैनिक सारांश',
                    'weekly': 'साप्ताहिक सारांश',
                    'save_settings': 'सेटिंग्स सहेजें',
                    'logout': 'लॉगआउट',
                    'add_remedy': 'उपचार जोड़ें',
                    'add_remedy_desc': 'डेटाबेस में नए उपचार, जैव कीटनाशक या उर्वरक जोड़ें।',
                    'remedy_name': 'उपचार का नाम',
                    'target_crops': 'लक्षित फसलें',
                    'description': 'विवरण',
                    'preparation_instructions': 'तैयारी के निर्देश',
                    'application_instructions': 'आवेदन निर्देश',
                    'upload_video': 'वीडियो ट्यूटोरियल अपलोड करें',
                    'click_to_upload_video': 'वीडियो अपलोड करने के लिए क्लिक करें',
                    'save_remedy': 'उपचार सहेजें',
                    'pesticide_name': 'कीटनाशक का नाम',
                    'target_pests': 'लक्षित कीट',
                    'safety_precautions': 'सुरक्षा सावधानियां',
                    'save_pesticide': 'जैव कीटनाशक सहेजें',
                    'fertilizer_name': 'उर्वरक का नाम',
                    'nutrient_content': 'पोषक तत्व सामग्री',
                    'benefits': 'लाभ',
                    'save_fertilizer': 'जैव उर्वरक सहेजें'
                }
            }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Initialize languages
            initializeLanguages();
            
            // Initialize event listeners
            initializeEventListeners();
            
            // Initialize charts
            initializeCharts();
            
            // Load user location
            loadUserLocation();
            
            // Update IoT sensor data
            updateSensorData();
            setInterval(updateSensorData, 5000);
            
            // Check if user is logged in
            checkAuthStatus();
            
            // Load settings

            console.log('AgriSmart Adviser initialized successfully!');
        }

        function initializeLanguages() {
            const languageList = document.getElementById('language-list');
            
            // Sort languages alphabetically
            appData.languages.sort((a, b) => a.name.localeCompare(b.name));
            
            // Populate language dropdown
            appData.languages.forEach(lang => {
                const listItem = document.createElement('li');
                listItem.textContent = lang.name;
                listItem.dataset.code = lang.code;
                listItem.addEventListener('click', function() {
                    selectLanguage(lang.code);
                });
                languageList.appendChild(listItem);
            });
            
            // Language search functionality
            document.getElementById('language-search').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const items = languageList.querySelectorAll('li');
                
                items.forEach(item => {
                    if (item.textContent.toLowerCase().includes(searchTerm)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        }

        function selectLanguage(code) {
            appData.currentLanguage = code;
            const language = appData.languages.find(lang => lang.code === code);
            document.getElementById('language-btn').innerHTML = `<i class="fas fa-globe"></i> ${language.name} <i class="fas fa-chevron-down"></i>`;
            document.getElementById('current-language-name').textContent = language.name;
            document.getElementById('language-dropdown').style.display = 'none';
            
            // Update the entire UI with the selected language
            updateLanguage();
        }

        function updateLanguage() {
            const currentLang = appData.currentLanguage;
            const translations = appData.translations[currentLang] || appData.translations['en'];
            
            // Update all elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[key]) {
                    element.textContent = translations[key];
                }
            });
            
            // Update all placeholder texts
            document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (translations[key]) {
                    element.placeholder = translations[key];
                }
            });
            
            // Update the chatbot welcome message
            const chatbotWelcome = document.querySelector('.chatbot-messages .bot-message');
            if (chatbotWelcome && translations['chatbot_welcome']) {
                chatbotWelcome.textContent = translations['chatbot_welcome'];
            }

            // Show notification
            showNotification('Language changed to ' + document.getElementById('current-language-name').textContent);
        }

        function initializeEventListeners() {
            // Tab Navigation
            document.querySelectorAll('.nav-tabs a').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all tabs and contents
                    document.querySelectorAll('.nav-tabs a').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Show corresponding content
                    const target = this.getAttribute('href');
                    document.querySelector(target).classList.add('active');
                });
            });

            // Language Selector
            document.getElementById('language-btn').addEventListener('click', function() {
                const dropdown = document.getElementById('language-dropdown');
                dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
            });

            // Close language dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.language-selector')) {
                    document.getElementById('language-dropdown').style.display = 'none';
                }
            });

            // Camera Functionality
            initializeCamera();

            // Market & Profit Tools
            document.getElementById('get-price-btn').addEventListener('click', getMarketPrice);
            document.getElementById('get-crop-recommendation').addEventListener('click', getCropRecommendation);
            document.getElementById('run-simulation').addEventListener('click', runSimulation);

            // Database Features
            document.getElementById('natural-solutions-db').addEventListener('click', function() {
                document.getElementById('natural-solutions-content').style.display = 'block';
                document.getElementById('crop-disease-content').style.display = 'none';
                document.getElementById('smart-analytics-content').style.display = 'none';
                document.getElementById('add-remedy-section').style.display = 'none';
                displayAllNaturalSolutions();
            });

            document.getElementById('crop-disease-library').addEventListener('click', function() {
                document.getElementById('crop-disease-content').style.display = 'block';
                document.getElementById('natural-solutions-content').style.display = 'none';
                document.getElementById('smart-analytics-content').style.display = 'none';
                document.getElementById('add-remedy-section').style.display = 'none';
                displayCropDiseases();
            });

            document.getElementById('smart-analytics-db').addEventListener('click', function() {
                document.getElementById('smart-analytics-content').style.display = 'grid';
                document.getElementById('natural-solutions-content').style.display = 'none';
                document.getElementById('crop-disease-content').style.display = 'none';
                document.getElementById('add-remedy-section').style.display = 'none';
            });

            // Add Remedy Feature
            document.getElementById('add-remedy-feature').addEventListener('click', function() {
                document.getElementById('add-remedy-section').style.display = 'block';
                document.getElementById('natural-solutions-content').style.display = 'none';
                document.getElementById('crop-disease-content').style.display = 'none';
                document.getElementById('smart-analytics-content').style.display = 'none';
            });

            // Remedy Type Buttons
            document.querySelectorAll('.remedy-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.remedy-type-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.remedy-form').forEach(f => f.classList.remove('active'));
                    
                    this.classList.add('active');
                    const type = this.dataset.type;
                    document.getElementById(`${type}-form`).classList.add('active');
                });
            });

            // File upload functionality
            document.querySelectorAll('.file-upload').forEach(upload => {
                upload.addEventListener('click', function() {
                    const inputId = this.id.replace('-upload', '');
                    document.getElementById(inputId).click();
                });
            });

            // Save Remedy
            document.getElementById('save-remedy').addEventListener('click', function() {
                const name = document.getElementById('remedy-name').value;
                const crops = document.getElementById('remedy-crops').value;
                const description = document.getElementById('remedy-description').value;
                const preparation = document.getElementById('remedy-preparation').value;
                const application = document.getElementById('remedy-application').value;
                const benefits = document.getElementById('remedy-benefits').value;
                const diseases = document.getElementById('remedy-diseases').value;
                
                if (!name || !crops || !description) {
                    showNotification('Please fill in all required fields', 'error');
                    return;
                }
                
                const newRemedy = {
                    name: name,
                    description: description,
                    details: {
                        crops: crops,
                        preparation: preparation,
                        application: application,
                        benefits: benefits,
                        diseases: diseases,
                        video: 'https://www.youtube.com/embed/new-remedy'
                    }
                };
                
                // Add to remedies database (in a real app, this would go to backend)
                if (!appData.userRemedies) {
                    appData.userRemedies = [];
                }
                appData.userRemedies.push(newRemedy);
                
                // Clear form
                document.getElementById('remedy-form').reset();
                
                showNotification('Natural remedy added successfully!');
            });

            // Save Bio Pesticide
            document.getElementById('save-pesticide').addEventListener('click', function() {
                const name = document.getElementById('pesticide-name').value;
                const pests = document.getElementById('pesticide-pests').value;
                const crops = document.getElementById('pesticide-crops').value;
                const description = document.getElementById('pesticide-description').value;
                const preparation = document.getElementById('pesticide-preparation').value;
                const application = document.getElementById('pesticide-application').value;
                const safety = document.getElementById('pesticide-safety').value;
                const effectiveness = document.getElementById('pesticide-effectiveness').value;
                
                if (!name || !pests || !crops || !description) {
                    showNotification('Please fill in all required fields', 'error');
                    return;
                }
                
                const newPesticide = {
                    name: name,
                    description: description,
                    details: {
                        target: pests,
                        crops: crops,
                        preparation: preparation,
                        application: application,
                        safety: safety,
                        effectiveness: effectiveness,
                        video: 'https://www.youtube.com/embed/new-pesticide'
                    }
                };
                
                if (!appData.userPesticides) {
                    appData.userPesticides = [];
                }
                appData.userPesticides.push(newPesticide);
                
                document.getElementById('bio-pesticide-form').reset();
                showNotification('Bio pesticide added successfully!');
            });

            // Save Bio Fertilizer
            document.getElementById('save-fertilizer').addEventListener('click', function() {
                const name = document.getElementById('fertilizer-name').value;
                const crops = document.getElementById('fertilizer-crops').value;
                const nutrients = document.getElementById('fertilizer-nutrients').value;
                const description = document.getElementById('fertilizer-description').value;
                const preparation = document.getElementById('fertilizer-preparation').value;
                const application = document.getElementById('fertilizer-application').value;
                const benefits = document.getElementById('fertilizer-benefits').value;
                const frequency = document.getElementById('fertilizer-frequency').value;
                
                if (!name || !crops || !nutrients || !description) {
                    showNotification('Please fill in all required fields', 'error');
                    return;
                }
                
                const newFertilizer = {
                    name: name,
                    description: description,
                    details: {
                        crops: crops,
                        nutrients: nutrients,
                        preparation: preparation,
                        application: application,
                        benefits: benefits,
                        frequency: frequency,
                        video: 'https://www.youtube.com/embed/new-fertilizer'
                    }
                };
                
                if (!appData.userFertilizers) {
                    appData.userFertilizers = [];
                }
                appData.userFertilizers.push(newFertilizer);
                
                document.getElementById('bio-fertilizer-form').reset();
                showNotification('Bio fertilizer added successfully!');
            });

            // Disease search functionality
            document.getElementById('disease-search').addEventListener('input', function(e) {
                searchDiseases(e.target.value);
            });

            // Authentication
            document.getElementById('signin-btn').addEventListener('click', showAuthModal);
            document.getElementById('logout-btn').addEventListener('click', logoutUser);
            document.querySelector('.close').addEventListener('click', hideAuthModal);
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    switchAuthTab(tabName);
                });
            });
            document.getElementById('login-btn').addEventListener('click', loginUser);
            document.getElementById('register-btn').addEventListener('click', registerUser);
            
            // Social login buttons
            document.getElementById('google-login').addEventListener('click', googleLogin);
            document.getElementById('facebook-login').addEventListener('click', facebookLogin);

            // Settings
            document.getElementById('save-settings').addEventListener('click', saveSettings);

            // Chatbot
            initializeChatbot();
            
            // IoT Camera
            document.getElementById('connect-camera').addEventListener('click', connectSoilCamera);

            // Irrigation Schedule
            document.getElementById('save-irrigation-schedule').addEventListener('click', saveIrrigationSchedule);

            // Location
            document.getElementById('update-location-btn').addEventListener('click', function() {
                document.getElementById('location-map').style.display = 'block';
            });
            document.getElementById('save-location').addEventListener('click', saveLocation);

            // Generate PDF Report
            document.getElementById('generate-pdf').addEventListener('click', generatePDFReport);

            // Remedy categories
            document.querySelectorAll('.remedy-categories .btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.remedy-categories .btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const category = this.dataset.category;
                    filterRemedies(category);
                });
            });

            // Close modals
            document.querySelectorAll('.close').forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                });
            });

            // Close modals when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
        }

        // Camera Functionality - FIXED
        function initializeCamera() {
            const startCameraBtn = document.getElementById('start-camera');
            const capturePhotoBtn = document.getElementById('capture-photo');
            const uploadPhotoBtn = document.getElementById('upload-photo');
            const analyzePhotoBtn = document.getElementById('analyze-photo');
            const fileInput = document.getElementById('file-input');
            const cameraPreview = document.getElementById('camera-preview');
            const photoCanvas = document.getElementById('photo-canvas');
            const uploadedImage = document.getElementById('uploaded-image');
            
            let stream = null;
            
            startCameraBtn.addEventListener('click', async function() {
                try {
                    stream = await navigator.mediaDevices.getUserMedia({ 
                        video: { 
                            width: { ideal: 1280 },
                            height: { ideal: 720 },
                            facingMode: 'environment'
                        } 
                    });
                    cameraPreview.srcObject = stream;
                    capturePhotoBtn.disabled = false;
                    startCameraBtn.disabled = true;
                    startCameraBtn.style.display = 'none';
                    analyzePhotoBtn.style.display = 'none';
                    
                    showNotification('Camera started successfully');
                } catch (error) {
                    console.error('Error accessing camera:', error);
                    showNotification('Unable to access camera. Please check permissions.', 'error');
                }
            });
            
            capturePhotoBtn.addEventListener('click', function() {
                const context = photoCanvas.getContext('2d');
                photoCanvas.width = cameraPreview.videoWidth;
                photoCanvas.height = cameraPreview.videoHeight;
                context.drawImage(cameraPreview, 0, 0, photoCanvas.width, photoCanvas.height);
                
                // Convert to data URL and display
                const imageDataUrl = photoCanvas.toDataURL('image/jpeg');
                uploadedImage.src = imageDataUrl;
                uploadedImage.style.display = 'block';
                cameraPreview.style.display = 'none';
                analyzePhotoBtn.style.display = 'block';
                capturePhotoBtn.style.display = 'none';
                
                showNotification('Photo captured successfully');
            });
            
            uploadPhotoBtn.addEventListener('click', function() {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        uploadedImage.src = event.target.result;
                        uploadedImage.style.display = 'block';
                        cameraPreview.style.display = 'none';
                        analyzePhotoBtn.style.display = 'block';
                        capturePhotoBtn.style.display = 'none';
                        
                        if (stream) {
                            stream.getTracks().forEach(track => track.stop());
                        }
                        
                        showNotification('Photo uploaded successfully');
                    };
                    reader.readAsDataURL(file);
                }
            });

            analyzePhotoBtn.addEventListener('click', function() {
                detectDisease();
            });
        }

        // Disease Detection - FIXED
        function detectDisease() {
            showLoading(true);
            
            // Simulate AI processing
            setTimeout(() => {
                const diseases = Object.keys(appData.cropDiseases);
                const randomDisease = diseases[Math.floor(Math.random() * diseases.length)];
                const confidence = (Math.random() * 0.3 + 0.7) * 100; // 70-100% confidence
                
                document.getElementById('disease-name').textContent = randomDisease;
                document.getElementById('confidence-level').textContent = confidence.toFixed(1) + '%';
                
                // Display remedies
                displayRemedies(randomDisease);
                
                document.getElementById('results-section').style.display = 'block';
                document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });
                
                showLoading(false);
                showNotification('Disease detection completed: ' + randomDisease);
                
            }, 2000);
        }

        // Display remedies for a detected disease - FIXED
        function displayRemedies(disease) {
            const naturalRemediesContainer = document.getElementById('natural-remedies');
            const bioPesticidesContainer = document.getElementById('bio-pesticides');
            const bioFertilizersContainer = document.getElementById('bio-fertilizers');
            
            // Clear previous content
            naturalRemediesContainer.innerHTML = '';
            bioPesticidesContainer.innerHTML = '';
            bioFertilizersContainer.innerHTML = '';
            
            // Get remedies for the detected disease
            const remedies = appData.remedies[disease] || appData.remedies['Leaf Rust'];
            
            // Display natural remedies
            remedies.natural.forEach(remedy => {
                const remedyCard = createRemedyCard(remedy, 'natural');
                naturalRemediesContainer.appendChild(remedyCard);
            });
            
            // Display bio pesticides
            remedies.bioPesticides.forEach(pesticide => {
                const pesticideCard = createRemedyCard(pesticide, 'bioPesticide');
                bioPesticidesContainer.appendChild(pesticideCard);
            });
            
            // Display bio fertilizers
            remedies.bioFertilizers.forEach(fertilizer => {
                const fertilizerCard = createRemedyCard(fertilizer, 'bioFertilizer');
                bioFertilizersContainer.appendChild(fertilizerCard);
            });
        }

        // Create a remedy card
        function createRemedyCard(remedy, type) {
            const card = document.createElement('div');
            card.className = 'remedy-card';
            card.innerHTML = `
                <div class="remedy-title">${remedy.name}</div>
                <div class="remedy-desc">${remedy.description}</div>
                <button class="btn btn-outline view-details-btn" style="width: 100%;">
                    <i class="fas fa-info-circle"></i> View Details
                </button>
            `;
            
            card.querySelector('.view-details-btn').addEventListener('click', function(e) {
                e.stopPropagation();
                showRemedyDetails(remedy, type);
            });
            
            return card;
        }

        // Show remedy details in modal - FIXED
        function showRemedyDetails(remedy, type) {
            const modal = document.getElementById('remedy-details-modal');
            const title = document.getElementById('remedy-modal-title');
            const body = document.getElementById('remedy-modal-body');
            
            title.textContent = remedy.name;
            
            let detailsHTML = `
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <strong>Description:</strong> ${remedy.description}
                </div>
            `;
            
            if (remedy.details) {
                if (remedy.details.ingredients) {
                    detailsHTML += `
                        <h4>Ingredients:</h4>
                        <ul>
                            ${remedy.details.ingredients.map(ing => `<li>${ing}</li>`).join('')}
                        </ul>
                    `;
                }
                
                if (remedy.details.preparation) {
                    detailsHTML += `
                        <h4>Preparation:</h4>
                        <p>${remedy.details.preparation}</p>
                    `;
                }
                
                if (remedy.details.application) {
                    detailsHTML += `
                        <h4>Application:</h4>
                        <p>${remedy.details.application}</p>
                    `;
                }
                
                if (remedy.details.benefits) {
                    detailsHTML += `
                        <h4>Benefits:</h4>
                        <p>${remedy.details.benefits}</p>
                    `;
                }
                
                if (remedy.details.crops) {
                    detailsHTML += `
                        <h4>Suitable Crops:</h4>
                        <p>${remedy.details.crops}</p>
                    `;
                }
                
                if (remedy.details.video) {
                    detailsHTML += `
                        <h4>Video Tutorial:</h4>
                        <div class="remedy-video">
                            <iframe width="100%" height="200" src="${remedy.details.video}" 
                                    frameborder="0" allowfullscreen></iframe>
                        </div>
                    `;
                }
            }
            
            body.innerHTML = detailsHTML;
            modal.style.display = 'block';
        }

        // Market Price Prediction - FIXED
        function getMarketPrice() {
            const cropSelect = document.getElementById('crop-price-select');
            const selectedCrop = cropSelect.value;
            const location = appData.userLocation;
            
            if (!selectedCrop) {
                showNotification('Please select a crop', 'error');
                return;
            }
            
            const locationPrices = appData.marketPrices[location] || appData.marketPrices['Punjab, India'];
            const priceData = locationPrices[selectedCrop];
            
            if (!priceData) {
                showNotification('Price data not available for ' + selectedCrop, 'error');
                return;
            }
            
            const priceResult = document.getElementById('price-result');
            const priceResultText = document.getElementById('price-result-text');
            
            const trendIcon = priceData.trend === 'up' ? '📈' : priceData.trend === 'down' ? '📉' : '➡️';
            const trendColor = priceData.trend === 'up' ? 'green' : priceData.trend === 'down' ? 'red' : 'orange';
            
            priceResult.style.display = 'block';
            priceResultText.innerHTML = `
                <strong>${selectedCrop.charAt(0).toUpperCase() + selectedCrop.slice(1)} Prices in ${location}:</strong><br>
                Current Price: <strong>₹${priceData.current}/quintal</strong><br>
                Trend: <strong style="color: ${trendColor}">${trendIcon} ${priceData.change_percentage}%</strong> from last week<br>
                <small>Based on local market demand and supply conditions</small>
            `;
            
            showNotification('Market price retrieved for ' + selectedCrop);
        }

        // Crop Planning Advisor - FIXED
        function getCropRecommendation() {
            const lastCrop1 = document.getElementById('last-crop-1').value;
            const lastCrop2 = document.getElementById('last-crop-2').value;
            const soilPh = parseFloat(document.getElementById('soil-ph').value);
            const waterAvailability = document.getElementById('water-availability').value;
            const location = document.getElementById('crop-location').value || appData.userLocation;
            
            if (!lastCrop1 || !soilPh) {
                showNotification('Please fill at least Last Crop 1 and Soil pH', 'error');
                return;
            }
            
            const locationRecommendations = appData.cropRecommendations[location] || appData.cropRecommendations['Punjab, India'];
            let recommendations = [];
            
            // pH-based recommendations
            if (soilPh < 6.0) {
                recommendations = recommendations.concat(locationRecommendations.low_ph || ['Legumes', 'Potatoes']);
            } else if (soilPh > 7.5) {
                recommendations = recommendations.concat(locationRecommendations.high_ph || ['Cabbage', 'Cauliflower']);
            }
            
            // Water availability recommendations
            if (waterAvailability === 'low') {
                recommendations = recommendations.concat(locationRecommendations.low_water || ['Millet', 'Sorghum']);
            } else if (waterAvailability === 'high') {
                recommendations = recommendations.concat(locationRecommendations.high_water || ['Rice', 'Sugarcane']);
            }
            
            // Crop rotation recommendations
            if (locationRecommendations.crop_rotation && locationRecommendations.crop_rotation[lastCrop1]) {
                recommendations = recommendations.concat(locationRecommendations.crop_rotation[lastCrop1]);
            }
            if (lastCrop2 && locationRecommendations.crop_rotation && locationRecommendations.crop_rotation[lastCrop2]) {
                recommendations = recommendations.concat(locationRecommendations.crop_rotation[lastCrop2]);
            }
            
            // Remove duplicates
            recommendations = [...new Set(recommendations)];
            
            // If no specific recommendations, provide general ones
            if (recommendations.length === 0) {
                recommendations = ['Mixed cropping with legumes', 'Seasonal vegetables', 'Oilseed crops'];
            }
            
            const recommendation = document.getElementById('crop-recommendation');
            const recommendationText = document.getElementById('crop-recommendation-text');
            
            recommendation.style.display = 'block';
            recommendationText.innerHTML = `
                <strong>Recommended Next Crops for ${location}:</strong><br><br>
                ${recommendations.map(rec => `• ${rec}`).join('<br>')}<br><br>
                <strong>Reasoning:</strong><br>
                • Soil pH ${soilPh} favors these crops<br>
                • ${waterAvailability} water availability suitable<br>
                • Good rotation after ${lastCrop1}${lastCrop2 ? ' and ' + lastCrop2 : ''}<br>
                • Local climate and market conditions considered
            `;
            
            showNotification('Crop recommendations generated based on your inputs');
        }

        // Simulation Mode - FIXED
        function runSimulation() {
            const crop = document.getElementById('simulation-crop').value;
            const location = document.getElementById('simulation-location').value || appData.userLocation;
            
            if (!crop) {
                showNotification('Please select a crop', 'error');
                return;
            }
            
            // Get location-specific data
            const locationPrices = appData.marketPrices[location] || appData.marketPrices['Punjab, India'];
            const priceData = locationPrices[crop];
            
            if (!priceData) {
                showNotification('Simulation data not available for ' + crop, 'error');
                return;
            }
            
            // Generate simulation results based on location and crop
            const baseYield = {
                'wheat': 2.5, 'rice': 3.0, 'corn': 2.8, 'soybean': 1.8, 'cotton': 1.2
            }[crop] || 2.0;
            
            const locationMultiplier = {
                'Punjab, India': 1.2,
                'Maharashtra, India': 1.0,
                'Karnataka, India': 0.9
            }[location] || 1.0;
            
            const expectedYield = (baseYield * locationMultiplier).toFixed(1);
            const estimatedProfit = Math.round(priceData.current * baseYield * 10 * locationMultiplier);
            const waterRequirement = Math.round(500 * locationMultiplier);
            const growthPeriod = 120 + Math.round(Math.random() * 30 - 15);
            
            const simulationResult = document.getElementById('simulation-result');
            const simulationResultText = document.getElementById('simulation-result-text');
            
            simulationResult.style.display = 'block';
            simulationResultText.innerHTML = `
                <strong>Simulation Results for ${crop} in ${location}:</strong><br><br>
                • Expected yield: ${expectedYield} tons per acre<br>
                • Estimated profit: ₹${estimatedProfit.toLocaleString()} per acre<br>
                • Water requirement: ${waterRequirement} liters per day<br>
                • Growth period: ${growthPeriod} days<br>
                • Best planting time: Based on local seasonal patterns<br>
                • Market trend: ${priceData.trend === 'up' ? 'Favorable' : priceData.trend === 'down' ? 'Declining' : 'Stable'}<br><br>
                <em>Note: These are estimates based on ${location} conditions and current market trends.</em>
            `;
            
            // Update profit chart with simulated data
            updateProfitChart(crop, location, estimatedProfit);
            
            showNotification('Simulation completed for ' + crop);
        }

        // Update profit chart based on simulation
        function updateProfitChart(crop, location, estimatedProfit) {
            const profitChart = Chart.getChart('profit-chart');
            if (profitChart) {
                profitChart.data.datasets[0].data = [
                    estimatedProfit * 0.7,
                    estimatedProfit * 0.9,
                    estimatedProfit * 0.8,
                    estimatedProfit * 1.1,
                    estimatedProfit * 1.0,
                    estimatedProfit
                ];
                profitChart.update();
                
                // Update profit increase value
                const profitIncrease = Math.round((Math.random() * 20 + 15)); // 15-35%
                document.getElementById('profit-increase-value').textContent = profitIncrease + '%';
            }
        }

        // Initialize charts
        function initializeCharts() {
            // Profit Chart
            const profitCtx = document.getElementById('profit-chart').getContext('2d');
            new Chart(profitCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Profit (in ₹)',
                        data: [12000, 19000, 15000, 25000, 22000, 30000],
                        borderColor: '#2e7d32',
                        backgroundColor: 'rgba(46, 125, 50, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Sensor Chart
            const sensorCtx = document.getElementById('sensor-chart').getContext('2d');
            new Chart(sensorCtx, {
                type: 'line',
                data: {
                    labels: ['6 AM', '9 AM', '12 PM', '3 PM', '6 PM', '9 PM'],
                    datasets: [
                        {
                            label: 'Soil Moisture',
                            data: [65, 62, 58, 55, 60, 63],
                            borderColor: '#2196F3',
                            backgroundColor: 'rgba(33, 150, 243, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Temperature',
                            data: [22, 26, 30, 32, 28, 24],
                            borderColor: '#FF5722',
                            backgroundColor: 'rgba(255, 87, 34, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            
            // Profit Analytics Chart
            const profitAnalyticsCtx = document.getElementById('profit-analytics-chart').getContext('2d');
            new Chart(profitAnalyticsCtx, {
                type: 'bar',
                data: {
                    labels: ['Wheat', 'Rice', 'Corn', 'Soybean', 'Cotton'],
                    datasets: [{
                        label: 'Profit per Acre (₹)',
                        data: [25000, 32000, 18000, 42000, 58000],
                        backgroundColor: [
                            'rgba(46, 125, 50, 0.7)',
                            'rgba(76, 175, 80, 0.7)',
                            'rgba(139, 195, 74, 0.7)',
                            'rgba(205, 220, 57, 0.7)',
                            'rgba(255, 235, 59, 0.7)'
                        ],
                        borderColor: [
                            'rgba(46, 125, 50, 1)',
                            'rgba(76, 175, 80, 1)',
                            'rgba(139, 195, 74, 1)',
                            'rgba(205, 220, 57, 1)',
                            'rgba(255, 235, 59, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Growth Chart
            const growthCtx = document.getElementById('growth-chart').getContext('2d');
            new Chart(growthCtx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                    datasets: [{
                        label: 'Growth Rate (cm)',
                        data: [5, 12, 20, 28, 35, 42],
                        borderColor: '#4caf50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Disease Trend Chart
            const diseaseTrendCtx = document.getElementById('disease-trend-chart').getContext('2d');
            new Chart(diseaseTrendCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Disease Cases',
                        data: [5, 8, 12, 15, 10, 7],
                        backgroundColor: 'rgba(244, 67, 54, 0.7)',
                        borderColor: 'rgba(244, 67, 54, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Expense Chart
            const expenseCtx = document.getElementById('expense-chart').getContext('2d');
            new Chart(expenseCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Seeds', 'Fertilizers', 'Labor', 'Equipment', 'Irrigation'],
                    datasets: [{
                        data: [25, 20, 30, 15, 10],
                        backgroundColor: [
                            'rgba(46, 125, 50, 0.7)',
                            'rgba(76, 175, 80, 0.7)',
                            'rgba(139, 195, 74, 0.7)',
                            'rgba(205, 220, 57, 0.7)',
                            'rgba(255, 235, 59, 0.7)'
                        ],
                        borderColor: [
                            'rgba(46, 125, 50, 1)',
                            'rgba(76, 175, 80, 1)',
                            'rgba(139, 195, 74, 1)',
                            'rgba(205, 220, 57, 1)',
                            'rgba(255, 235, 59, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        // Load user location
        function loadUserLocation() {
            const savedLocation = localStorage.getItem('userLocation');
            if (savedLocation) {
                appData.userLocation = savedLocation;
                document.getElementById('current-location').textContent = savedLocation;
                document.getElementById('crop-location').value = savedLocation;
                document.getElementById('simulation-location').value = savedLocation;
            }
        }

        // Update IoT sensor data
        function updateSensorData() {
            // Simulate sensor data updates with realistic variations
            const baseMoisture = 60 + Math.floor(Math.random() * 10);
            const baseTemp = 25 + Math.floor(Math.random() * 10);
            const baseHumidity = 65 + Math.floor(Math.random() * 15);
            const basePh = 6.5 + (Math.random() * 1 - 0.5);
            
            document.getElementById('soil-moisture-value').textContent = `${baseMoisture}%`;
            document.getElementById('soil-moisture-progress').style.width = `${baseMoisture}%`;
            document.getElementById('soil-moisture-status').textContent = 
                baseMoisture >= 60 ? 'Optimal' : baseMoisture >= 40 ? 'Low' : 'Critical';
            
            document.getElementById('temperature-value').textContent = `${baseTemp}°C`;
            document.getElementById('temperature-progress').style.width = `${(baseTemp / 40) * 100}%`;
            document.getElementById('temperature-status').textContent = 
                baseTemp >= 25 && baseTemp <= 35 ? 'Normal' : baseTemp > 35 ? 'High' : 'Low';
            
            document.getElementById('humidity-value').textContent = `${baseHumidity}%`;
            document.getElementById('humidity-progress').style.width = `${baseHumidity}%`;
            document.getElementById('humidity-status').textContent = 
                baseHumidity >= 70 ? 'High' : baseHumidity >= 40 ? 'Normal' : 'Low';
            
            document.getElementById('soil-ph-value').textContent = basePh.toFixed(1);
            document.getElementById('soil-ph-progress').style.width = `${(basePh / 14) * 100}%`;
            document.getElementById('soil-ph-status').textContent = 
                basePh >= 6.0 && basePh <= 7.5 ? 'Neutral' : basePh < 6.0 ? 'Acidic' : 'Alkaline';
        }

        // Connect soil camera - FIXED
        function connectSoilCamera() {
            showLoading(true);
            
            // Simulate camera connection
            setTimeout(() => {
                document.getElementById('soil-camera-feed').innerHTML = `
                    <div style="text-align: center; color: white; padding: 20px;">
                        <i class="fas fa-camera" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <div>Soil Camera Connected</div>
                        <div style="font-size: 0.9rem; margin-top: 10px;">Live feed will appear here</div>
                        <div style="margin-top: 20px; background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px;">
                            <div>Soil Condition: Healthy</div>
                            <div>Moisture Level: Optimal</div>
                            <div>Temperature: Normal</div>
                        </div>
                        <button class="btn btn-primary" style="margin-top: 15px;" onclick="analyzeSoil()">
                            <i class="fas fa-search"></i> Analyze Soil
                        </button>
                    </div>
                `;
                showLoading(false);
                showNotification('Soil camera connected successfully');
            }, 2000);
        }

        function analyzeSoil() {
            showLoading(true);
            
            // Simulate soil analysis
            setTimeout(() => {
                document.getElementById('soil-analysis-results').style.display = 'block';
                showLoading(false);
                showNotification('Soil analysis completed');
            }, 3000);
        }

        // Save irrigation schedule
        function saveIrrigationSchedule() {
            const schedule = document.getElementById('irrigation-schedule').value;
            if (schedule) {
                showNotification(`Irrigation schedule saved for ${new Date(schedule).toLocaleString()}`);
                
                // Schedule notification for irrigation time
                const scheduleTime = new Date(schedule).getTime();
                const currentTime = new Date().getTime();
                const timeUntilSchedule = scheduleTime - currentTime;
                
                if (timeUntilSchedule > 0) {
                    setTimeout(() => {
                        // Play notification sound
                        playNotificationSound();
                        showNotification('Time to irrigate your crops!', 'info');
                    }, timeUntilSchedule);
                }
            } else {
                showNotification('Please select a date and time for irrigation', 'error');
            }
        }

        // Play notification sound
        function playNotificationSound() {
            // Create audio context for notification sound
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'sine';
                oscillator.frequency.value = 800;
                gainNode.gain.value = 0.1;
                
                oscillator.start();
                setTimeout(() => {
                    oscillator.stop();
                }, 500);
            } catch (e) {
                console.log('Audio context not supported:', e);
            }
        }

        // Save location
        function saveLocation() {
            const country = document.getElementById('country-input').value;
            const state = document.getElementById('state-input').value;
            const district = document.getElementById('district-input').value;
            
            if (country && state && district) {
                appData.userLocation = `${district}, ${state}, ${country}`;
                localStorage.setItem('userLocation', appData.userLocation);
                document.getElementById('current-location').textContent = appData.userLocation;
                document.getElementById('crop-location').value = appData.userLocation;
                document.getElementById('simulation-location').value = appData.userLocation;
                document.getElementById('location-map').style.display = 'none';
                
                showNotification('Location saved successfully!');
            } else {
                showNotification('Please fill all location fields', 'error');
            }
        }

        // Display all natural solutions
        function displayAllNaturalSolutions() {
            const container = document.getElementById('all-natural-solutions');
            container.innerHTML = '';
            
            // Get all remedies from all diseases
            Object.keys(appData.remedies).forEach(disease => {
                const remedies = appData.remedies[disease];
                
                // Add natural remedies
                remedies.natural.forEach(remedy => {
                    const card = createRemedyCard(remedy, 'natural');
                    container.appendChild(card);
                });
                
                // Add bio pesticides
                remedies.bioPesticides.forEach(pesticide => {
                    const card = createRemedyCard(pesticide, 'bioPesticide');
                    container.appendChild(card);
                });
                
                // Add bio fertilizers
                remedies.bioFertilizers.forEach(fertilizer => {
                    const card = createRemedyCard(fertilizer, 'bioFertilizer');
                    container.appendChild(card);
                });
            });
        }

        // Display crop diseases
        function displayCropDiseases() {
            const container = document.getElementById('disease-results');
            container.innerHTML = '';
            container.style.display = 'block';
            
            Object.keys(appData.cropDiseases).forEach(diseaseName => {
                const disease = appData.cropDiseases[diseaseName];
                const item = document.createElement('div');
                item.className = 'search-result-item';
                item.innerHTML = `
                    <strong>${diseaseName}</strong><br>
                    <small>${disease.symptoms.substring(0, 100)}...</small>
                `;
                item.addEventListener('click', function() {
                    showDiseaseDetails(diseaseName);
                });
                container.appendChild(item);
            });
        }

        // Search diseases
        function searchDiseases(query) {
            const container = document.getElementById('disease-results');
            const items = container.querySelectorAll('.search-result-item');
            
            if (!query) {
                items.forEach(item => item.style.display = 'block');
                return;
            }
            
            const searchTerm = query.toLowerCase();
            items.forEach(item => {
                const diseaseName = item.querySelector('strong').textContent.toLowerCase();
                if (diseaseName.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Show disease details - FIXED
        function showDiseaseDetails(diseaseName) {
            const disease = appData.cropDiseases[diseaseName];
            const modal = document.getElementById('disease-details-modal');
            const title = document.getElementById('disease-modal-title');
            const body = document.getElementById('disease-modal-body');
            
            title.textContent = diseaseName;
            
            let detailsHTML = `
                <img src="${disease.image}" alt="${diseaseName}" class="disease-image">
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Severity:</strong> ${disease.severity} | <strong>Season:</strong> ${disease.season}
                </div>
                
                <h4>Symptoms:</h4>
                <p>${disease.symptoms}</p>
                
                <h4>Causes:</h4>
                <p>${disease.causes}</p>
                
                <h4>Prevention:</h4>
                <p>${disease.prevention}</p>
                
                <h4>Treatment:</h4>
                <p>${disease.treatment}</p>
                
                <h4>Affected Crops:</h4>
                <p>${disease.affectedCrops.join(', ')}</p>
                
                <div class="alert alert-info">
                    <i class="fas fa-lightbulb"></i>
                    <strong>Recommended Solutions:</strong> See the Natural Solutions database for specific remedies.
                </div>
                
                <button class="btn btn-primary" onclick="showRemediesForDisease('${diseaseName}')" style="width: 100%;">
                    <i class="fas fa-book-medical"></i> View Recommended Remedies
                </button>
            `;
            
            body.innerHTML = detailsHTML;
            modal.style.display = 'block';
            
            // Hide search results
            document.getElementById('disease-results').style.display = 'none';
        }

        // Show remedies for specific disease
        function showRemediesForDisease(diseaseName) {
            // Close disease modal
            document.getElementById('disease-details-modal').style.display = 'none';
            
            // Switch to natural solutions tab
            document.getElementById('natural-solutions-db').click();
            
            // Show notification
            showNotification(`Showing remedies for ${diseaseName}`);
            
            // In a full implementation, this would filter the remedies to show only those for the specific disease
        }

        // Filter remedies by category
        function filterRemedies(category) {
            const container = document.getElementById('all-natural-solutions');
            const items = container.querySelectorAll('.remedy-card');
            
            items.forEach(item => {
                if (category === 'all') {
                    item.style.display = 'block';
                } else {
                    // This would need additional data attributes to work properly
                    item.style.display = 'block';
                }
            });
        }

        // Generate PDF Report - FIXED
        function generatePDFReport() {
            showLoading(true);
            
            // Simulate PDF generation
            setTimeout(() => {
                const reportContent = `
                    AGRISMART ADVISER - FARM REPORT
                    Generated on: ${new Date().toLocaleDateString()}
                    Location: ${appData.userLocation}
                    
                    CROP HEALTH SUMMARY:
                    - Last detected disease: Leaf Rust
                    - Confidence: 92%
                    - Recommended treatments applied
                    
                    REMEDIES USED:
                    - Neem Oil Spray
                    - Garlic Solution
                    - Compost Tea
                    
                    PROFIT PREDICTION:
                    - Expected increase: 23%
                    - Market trend: Favorable
                    
                    SUSTAINABILITY SCORE: 85%
                    Eco-Friendly Practices Implemented
                    
                    RECOMMENDATIONS:
                    1. Continue current treatment regimen
                    2. Monitor soil moisture levels
                    3. Consider crop rotation next season
                `;
                
                // In a real application, this would generate an actual PDF
                // For now, we'll show the content in an alert and simulate download
                const blob = new Blob([reportContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `agrismart-report-${new Date().toISOString().split('T')[0]}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showLoading(false);
                showNotification('PDF report generated and downloaded successfully');
            }, 3000);
        }

        // Initialize chatbot - FIXED
        function initializeChatbot() {
            const chatbotToggle = document.getElementById('chatbot-toggle');
            const chatbotWindow = document.getElementById('chatbot-window');
            const chatbotClose = document.getElementById('chatbot-close');
            const chatbotSend = document.getElementById('chatbot-send');
            const chatbotVoice = document.getElementById('chatbot-voice');
            const chatbotInput = document.getElementById('chatbot-input');
            const chatbotMessages = document.getElementById('chatbot-messages');
            
            let isListening = false;
            let recognition = null;
            
            // Initialize speech recognition if available
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    chatbotInput.value = transcript;
                    sendChatMessage();
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    showNotification('Voice recognition failed: ' + event.error, 'error');
                    isListening = false;
                    chatbotVoice.classList.remove('voice-recording');
                };
                
                recognition.onend = function() {
                    isListening = false;
                    chatbotVoice.classList.remove('voice-recording');
                };
            } else {
                chatbotVoice.style.display = 'none';
            }
            
            chatbotToggle.addEventListener('click', function() {
                chatbotWindow.style.display = chatbotWindow.style.display === 'flex' ? 'none' : 'flex';
            });
            
            chatbotClose.addEventListener('click', function() {
                chatbotWindow.style.display = 'none';
            });
            
            chatbotSend.addEventListener('click', sendChatMessage);
            
            chatbotVoice.addEventListener('click', function() {
                if (!recognition) {
                    showNotification('Voice recognition not supported in your browser', 'error');
                    return;
                }
                
                if (isListening) {
                    recognition.stop();
                    isListening = false;
                    chatbotVoice.classList.remove('voice-recording');
                } else {
                    recognition.start();
                    isListening = true;
                    chatbotVoice.classList.add('voice-recording');
                    showNotification('Listening... Speak now');
                }
            });
            
            chatbotInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
            
            function sendChatMessage() {
                const message = chatbotInput.value.trim();
                if (message) {
                    // Add user message
                    addChatMessage(message, 'user');
                    chatbotInput.value = '';
                    
                    // Generate AI response
                    setTimeout(() => {
                        const response = generateAIResponse(message);
                        addChatMessage(response, 'bot');
                    }, 1000);
                }
            }
            
            function addChatMessage(text, sender) {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${sender}-message`;
                messageElement.textContent = text;
                chatbotMessages.appendChild(messageElement);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            }
            
            function generateAIResponse(userMessage) {
                const message = userMessage.toLowerCase();
                
                // Agriculture-specific responses
                if (message.includes('disease') || message.includes('sick') || message.includes('problem')) {
                    const responses = [
                        "I understand you're concerned about crop health. Based on common issues in your area, I recommend checking for leaf rust or powdery mildew. You can use the crop health detection feature to get specific diagnosis.",
                        "For crop diseases, I suggest using natural remedies like neem oil spray or garlic solution. These are effective and environmentally friendly. Check our natural solutions database for detailed recipes.",
                        "Many crop issues are related to soil health. Have you checked your soil pH and moisture levels recently? Our IoT sensors can help monitor these parameters."
                    ];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                if (message.includes('price') || message.includes('market') || message.includes('sell')) {
                    const responses = [
                        "Current market prices are looking favorable for wheat and rice in your region. You can check the Market & Profit section for real-time price predictions.",
                        "Based on market trends, this is a good time to sell soybean and cotton. Prices have increased by 5-8% in the last week.",
                        "I recommend checking the market prediction tool for specific crop prices. The prices are updated based on location and demand patterns."
                    ];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                if (message.includes('soil') || message.includes('fertilizer') || message.includes('nutrient')) {
                    const responses = [
                        "For healthy soil, I recommend using organic compost and biofertilizers. These improve soil structure and provide balanced nutrition.",
                        "Your soil pH seems optimal based on recent readings. Consider adding vermicompost for better nutrient availability.",
                        "I suggest using phosphate-solubilizing bacteria to make soil phosphorus more available to your crops. This can reduce fertilizer costs."
                    ];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                if (message.includes('water') || message.includes('irrigation') || message.includes('rain')) {
                    const responses = [
                        "Based on current soil moisture levels, your irrigation schedule seems appropriate. Continue monitoring with our IoT sensors.",
                        "I recommend drip irrigation for water efficiency. It can save up to 50% water compared to traditional methods.",
                        "The smart irrigation system suggests watering tomorrow at 6 AM for optimal results. Check the AI & IoT section for detailed advice."
                    ];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                if (message.includes('crop') || message.includes('plant') || message.includes('grow')) {
                    const responses = [
                        "For crop planning, consider rotating with legumes to improve soil nitrogen. This also helps break disease cycles.",
                        "Based on your location and previous crops, I recommend planting wheat or mustard in the next season for better profits.",
                        "The crop planning advisor can give you specific recommendations based on your soil conditions and market trends."
                    ];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                if (message.includes('profit') || message.includes('income') || message.includes('money')) {
                    const responses = [
                        "To maximize profits, focus on high-value crops with good market demand. Consider diversifying with vegetables along with traditional crops.",
                        "Our profit maximizer analysis shows you can increase income by 20-30% through better crop selection and timing.",
                        "Reducing input costs through organic practices and improving yield through better management can significantly boost your profits."
                    ];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                if (message.includes('organic') || message.includes('natural') || message.includes('bio')) {
                    const responses = [
                        "Organic farming practices not only protect the environment but can also be more profitable in the long run. Our database has many natural solutions.",
                        "I recommend using bio-pesticides like neem-based products and bacterial formulations. They're effective and safe for beneficial insects.",
                        "For natural fertilization, consider vermicompost, panchagavya, or jeevamrutha. These traditional methods are very effective."
                    ];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                if (message.includes('weather') || message.includes('rain') || message.includes('temperature')) {
                    const responses = [
                        "Current weather conditions are favorable for most crops. However, monitor for sudden temperature changes that might affect sensitive plants.",
                        "Based on the forecast, no extreme weather is expected in your area for the next week. Good time for field activities.",
                        "I recommend using weather-resistant crop varieties to handle unexpected climate variations."
                    ];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                // General responses
                const generalResponses = [
                    "I understand your question about farming. Could you provide more specific details so I can give you better advice?",
                    "That's an interesting farming question. Our AgriSmart system has detailed information on this topic in the knowledge database.",
                    "I recommend checking the relevant section of our app for comprehensive information on this farming topic.",
                    "For detailed guidance on this agricultural matter, please use the specific tools in our application designed for such analysis.",
                    "I'm here to help with your farming queries. Feel free to ask about crop health, market prices, soil management, or any other agricultural topic."
                ];
                
                return generalResponses[Math.floor(Math.random() * generalResponses.length)];
            }
        }

        // Authentication functions
        function showAuthModal() {
            document.getElementById('auth-modal').style.display = 'block';
        }

        function hideAuthModal() {
            document.getElementById('auth-modal').style.display = 'none';
        }

        function switchAuthTab(tabName) {
            document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
            
            document.querySelector(`.auth-tab[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}-form`).classList.add('active');
        }

        function registerUser() {
            const name = document.getElementById('register-name').value;
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            if (!name || !username || !email || !password || !confirmPassword) {
                showNotification('Please fill all fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 6) {
                showNotification('Password must be at least 6 characters', 'error');
                return;
            }
            
            // Simulate registration
            showLoading(true);
            setTimeout(() => {
                appData.currentUser = {
                    name: name,
                    username: username,
                    email: email
                };
                localStorage.setItem('currentUser', JSON.stringify(appData.currentUser));
                updateUserInterface();
                hideAuthModal();
                showLoading(false);
                showNotification('Registration successful! Welcome to AgriSmart Adviser');
            }, 2000);
        }

        function loginUser() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            if (!username || !password) {
                showNotification('Please enter both username and password', 'error');
                return;
            }
            
            // Simulate login
            showLoading(true);
            setTimeout(() => {
                appData.currentUser = {
                    name: 'Demo User',
                    username: username,
                    email: username + '@example.com'
                };
                localStorage.setItem('currentUser', JSON.stringify(appData.currentUser));
                updateUserInterface();
                hideAuthModal();
                showLoading(false);
                showNotification('Login successful! Welcome back to AgriSmart Adviser');
            }, 1500);
        }

        function googleLogin() {
            showLoading(true);
            // Simulate Google login
            setTimeout(() => {
                appData.currentUser = {
                    name: 'Google User',
                    username: 'google_user',
                    email: 'google_user@example.com'
                };
                localStorage.setItem('currentUser', JSON.stringify(appData.currentUser));
                updateUserInterface();
                hideAuthModal();
                showLoading(false);
                showNotification('Google login successful! Welcome to AgriSmart Adviser');
            }, 1500);
        }

        function facebookLogin() {
            showLoading(true);
            // Simulate Facebook login
            setTimeout(() => {
                appData.currentUser = {
                    name: 'Facebook User',
                    username: 'facebook_user',
                    email: 'facebook_user@example.com'
                };
                localStorage.setItem('currentUser', JSON.stringify(appData.currentUser));
                updateUserInterface();
                hideAuthModal();
                showLoading(false);
                showNotification('Facebook login successful! Welcome to AgriSmart Adviser');
            }, 1500);
        }

        function logoutUser() {
            appData.currentUser = null;
            localStorage.removeItem('currentUser');
            updateUserInterface();
            showNotification('You have been logged out successfully.');
        }

        function updateUserInterface() {
            const userInfo = document.getElementById('user-info');
            const signinBtn = document.getElementById('signin-btn');
            const addRemedyFeature = document.getElementById('add-remedy-feature');
            
            if (appData.currentUser) {
                userInfo.style.display = 'block';
                signinBtn.style.display = 'none';
                document.getElementById('user-name').textContent = `Welcome, ${appData.currentUser.name}`;
                addRemedyFeature.style.display = 'block';
            } else {
                userInfo.style.display = 'none';
                signinBtn.style.display = 'block';
                addRemedyFeature.style.display = 'none';
                document.getElementById('add-remedy-section').style.display = 'none';
            }
        }

        function checkAuthStatus() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                appData.currentUser = JSON.parse(savedUser);
                updateUserInterface();
            }
        }

        // Save settings
        function saveSettings() {
            const languagePreference = document.getElementById('language-preference').value;
            const notificationFrequency = document.getElementById('notification-frequency').value;
            
            // Save settings to localStorage
            localStorage.setItem('languagePreference', languagePreference);
            localStorage.setItem('notificationFrequency', notificationFrequency);
            
            // Update language if changed
            if (languagePreference !== appData.currentLanguage) {
                selectLanguage(languagePreference);
            }
            
            // Show notification based on frequency setting
            if (notificationFrequency === 'immediate') {
                showNotification('Settings saved successfully! You will receive immediate notifications.');
            } else if (notificationFrequency === 'daily') {
                showNotification('Settings saved successfully! You will receive daily notification summaries.');
            } else {
                showNotification('Settings saved successfully! You will receive weekly notification summaries.');
            }
            
            // Enable/disable features based on toggle switches
            const voiceInputEnabled = document.getElementById('voice-input-toggle').checked;
            const smartAlertsEnabled = document.getElementById('smart-alerts-toggle').checked;
            const weatherAlertsEnabled = document.getElementById('weather-alerts-toggle').checked;
            const marketAlertsEnabled = document.getElementById('market-alerts-toggle').checked;
            const diseaseAlertsEnabled = document.getElementById('disease-alerts-toggle').checked;
            const locationServicesEnabled = document.getElementById('location-services-toggle').checked;
            
            // Save toggle states
            localStorage.setItem('voiceInputEnabled', voiceInputEnabled);
            localStorage.setItem('smartAlertsEnabled', smartAlertsEnabled);
            localStorage.setItem('weatherAlertsEnabled', weatherAlertsEnabled);
            localStorage.setItem('marketAlertsEnabled', marketAlertsEnabled);
            localStorage.setItem('diseaseAlertsEnabled', diseaseAlertsEnabled);
            localStorage.setItem('locationServicesEnabled', locationServicesEnabled);
            
            // Apply settings
            if (!locationServicesEnabled) {
                showNotification('Location services disabled. Some features may not work optimally.', 'warning');
            }
            
            if (smartAlertsEnabled) {
                showNotification('Smart alerts enabled. You will be notified about important farming events.');
            }
        }

        // Load settings
        function loadSettings() {
            const savedLanguage = localStorage.getItem('languagePreference');
            const savedNotificationFrequency = localStorage.getItem('notificationFrequency');
            
            if (savedLanguage) {
                document.getElementById('language-preference').value = savedLanguage;
                selectLanguage(savedLanguage);
            }
            
            if (savedNotificationFrequency) {
                document.getElementById('notification-frequency').value = savedNotificationFrequency;
            }
            
            // Load toggle states
            const voiceInputEnabled = localStorage.getItem('voiceInputEnabled') !== 'false';
            const smartAlertsEnabled = localStorage.getItem('smartAlertsEnabled') !== 'false';
            const weatherAlertsEnabled = localStorage.getItem('weatherAlertsEnabled') !== 'false';
            const marketAlertsEnabled = localStorage.getItem('marketAlertsEnabled') !== 'false';
            const diseaseAlertsEnabled = localStorage.getItem('diseaseAlertsEnabled') !== 'false';
            const locationServicesEnabled = localStorage.getItem('locationServicesEnabled') !== 'false';
            
            document.getElementById('voice-input-toggle').checked = voiceInputEnabled;
            document.getElementById('smart-alerts-toggle').checked = smartAlertsEnabled;
            document.getElementById('weather-alerts-toggle').checked = weatherAlertsEnabled;
            document.getElementById('market-alerts-toggle').checked = marketAlertsEnabled;
            document.getElementById('disease-alerts-toggle').checked = diseaseAlertsEnabled;
            document.getElementById('location-services-toggle').checked = locationServicesEnabled;
        }

        // Utility functions
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        function showNotification(message, type = 'success') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                ${message}
            `;
            
            document.getElementById('notification-container').appendChild(notification);
            
            // Remove notification after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
    </script>
</body>
</html>